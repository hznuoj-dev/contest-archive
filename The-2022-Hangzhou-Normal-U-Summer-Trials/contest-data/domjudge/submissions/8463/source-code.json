[{"id":"8467","submission_id":"8463","filename":"main.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CiNkZWZpbmUgbGwgbG9uZyBsb25nCmNvbnN0IHNpZ25lZCBJTkYgPSAxZTk7CmNvbnN0IHNpZ25lZCBtYXhuID0gMTAwMDE5Owpjb25zdCBzaWduZWQgbW9kZSA9IDFlOSArIDc7CgpzdHJ1Y3Qgc2VnVHJlZXsKICAgIGxsIGxnY2RbbWF4biA8PCA0XSwgcmdjZFttYXhuIDw8IDRdOwogICAgbGwgbXVsW21heG4gPDwgNF0sIGRpdlttYXhuIDw8IDRdOwogICAgdm9pZCBwdXNoX3VwKGxsIHApewogICAgICAgIGxnY2RbcF0gPSBfX2djZChsZ2NkW3AgKiAyXSwgbGdjZFtwKjIrMV0pOwogICAgICAgIHJnY2RbcF0gPSBfX2djZChyZ2NkW3AgKiAyXSwgcmdjZFtwKjIrMV0pOwogICAgfQogICAgdm9pZCBwdXNoX211bChsbCBwLCBsbCBtKXsKICAgICAgICByZ2NkW3BdICo9IG07CiAgICAgICAgbXVsW3BdICo9IG07CiAgICB9CiAgICB2b2lkIHB1c2hfZGl2KGxsIHAsIGxsIG0pewogICAgICAgIHJnY2RbcF0gLz0gbTsKICAgICAgICBkaXZbcF0gKj0gbTsKICAgIH0KICAgIHZvaWQgcHVzaF9kb3duKGxsIHApewogICAgICAgIGlmKG11bFtwXSAhPSAxKXsKICAgICAgICAgICAgcHVzaF9tdWwocCoyLCBtdWxbcF0pOwogICAgICAgICAgICBwdXNoX211bChwKjIrMSwgbXVsW3BdKTsKICAgICAgICAgICAgbXVsW3BdID0gMTsKICAgICAgICB9CiAgICAgICAgaWYoZGl2W3BdICE9IDEpewogICAgICAgICAgICBwdXNoX2RpdihwKjIsIGRpdltwXSk7CiAgICAgICAgICAgIHB1c2hfZGl2KHAqMisxLCBkaXZbcF0pOwogICAgICAgICAgICBkaXZbcF0gPSAxOwogICAgICAgIH0KICAgIH0KCiAgICB2b2lkIGJ1aWxkKGxsIHAsIGxsIGwsIGxsIHIpewogICAgICAgIGxnY2RbcF0gPSAwLCByZ2NkW3BdID0gMTsKICAgICAgICBtdWxbcF0gPSBkaXZbcF0gPSAxOwogICAgICAgIGlmKGwgPT0gcikgcmV0dXJuOwogICAgICAgIGxsIG1pZCA9IChsICsgcikgLyAyOwogICAgICAgIGJ1aWxkKHAqMiwgbCwgbWlkKTsKICAgICAgICBidWlsZChwKjIrMSwgbWlkKzEsIHIpOwogICAgfQogICAgdm9pZCBtdWx0aXB5KGxsIHAsIGxsIGwsIGxsIHIsIGxsIEwsIGxsIFIsIGxsIG0sIGJvb2wgZCl7CiAgICAgICAgaWYoTCA+IHIgfHwgbCA+IFIpIHJldHVybjsKICAgICAgICBpZihMIDw9IGwgJiYgciA8PSBSKXsKICAgICAgICAgICAgaWYoIWQpIHB1c2hfbXVsKHAsIG0pOwogICAgICAgICAgICBlbHNlIHB1c2hfZGl2KHAsIG0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHB1c2hfZG93bihwKTsKICAgICAgICBsbCBtaWQgPSAobCArIHIpIC8gMjsKICAgICAgICBtdWx0aXB5KHAqMiwgbCwgbWlkLCBMLCBSLCBtLCBkKTsKICAgICAgICBtdWx0aXB5KHAqMisxLCBtaWQrMSwgciwgTCwgUiwgbSwgZCk7CiAgICAgICAgcHVzaF91cChwKTsKICAgIH0KICAgIGxsIHF1ZXJ5KGxsIHAsIGxsIGwsIGxsIHIsIGxsIEwsIGxsIFIpewogICAgICAgIGlmKEwgPiByIHx8IGwgPiBSKSByZXR1cm4gMDsKICAgICAgICBpZihMIDw9IGwgJiYgciA8PSBSKXsKICAgICAgICAgICAgcmV0dXJuIF9fZ2NkKGxnY2RbcF0sIHJnY2RbcF0pOwogICAgICAgIH0KICAgICAgICBwdXNoX2Rvd24ocCk7CiAgICAgICAgbGwgbWlkID0gKGwgKyByKSAvIDI7CiAgICAgICAgbGwgcmVzID0gX19nY2QocXVlcnkocCoyLCBsLCBtaWQsIEwsIFIpLAogICAgICAgICAgICAgICAgICAgICAgcXVlcnkocCoyKzEsIG1pZCsxLCByLCBMLCBSKSk7CiAgICAgICAgcHVzaF91cChwKTsKICAgICAgICByZXR1cm4gcmVzOwogICAgfQogICAgdm9pZCBmaWxwKGxsIHAsIGxsIGwsIGxsIHIsIGxsIHgpewogICAgICAgIGlmKGwgPT0gcil7CiAgICAgICAgICAgIHN3YXAobGdjZFtwXSwgcmdjZFtwXSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcHVzaF9kb3duKHApOwogICAgICAgIGxsIG1pZCA9IChsICsgcikgLyAyOwogICAgICAgIGlmKHggPD0gbWlkKSBmaWxwKHAqMiwgbCwgbWlkLCB4KTsKICAgICAgICBlbHNlIGZpbHAocCoyKzEsIG1pZCsxLCByLCB4KTsKICAgICAgICBwdXNoX3VwKHApOwogICAgfQp9c2VndDsKCnZvaWQgc29sdmUoKXsKICAgIGxsIG4sIG07CiAgICBjaW4gPj4gbiA+PiBtOwogICAgc2VndC5idWlsZCgxLCAxLCBuKTsKICAgIGZvcihsbCBpPTE7aTw9bTtpKyspewogICAgICAgIHN0cmluZyBvcHQ7CiAgICAgICAgbGwgeCwgeSwgejsKICAgICAgICBjaW4gPj4gb3B0OwogICAgICAgIGlmKG9wdCA9PSAibXVsIil7CiAgICAgICAgICAgIGNpbiA+PiB4ID4+IHkgPj4gejsKICAgICAgICAgICAgc2VndC5tdWx0aXB5KDEsIDEsIG4sIHgsIHksIHosIDApOwogICAgICAgIH1lbHNlIGlmKG9wdCA9PSAiZGl2Iil7CiAgICAgICAgICAgIGNpbiA+PiB4ID4+IHkgPj4gejsKICAgICAgICAgICAgbGwgcmVzID0gc2VndC5xdWVyeSgxLCAxLCBuLCB4LCB5KTsKICAgICAgICAgICAgaWYocmVzICUgeiA9PSAwKXsKICAgICAgICAgICAgICAgIHNlZ3QubXVsdGlweSgxLCAxLCBuLCB4LCB5LCB6LCAxKTsKICAgICAgICAgICAgICAgIGNvdXQgPDwgIllFU1xuIjsKICAgICAgICAgICAgfWVsc2UgY291dCA8PCAiTk9cbiI7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGNpbiA+PiB4OwogICAgICAgICAgICBzZWd0LmZpbHAoMSwgMSwgbiwgeCk7CiAgICAgICAgfQogICAgfQp9CgpzaWduZWQgbWFpbigpIHsKI2lmZGVmIExPQ0FMCiAgICBmcmVvcGVuKCJ4LmluIiwgInIiLCBzdGRpbik7CiNlbmRpZgogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKICAgIGNvdXQudGllKG51bGxwdHIpOwoKICAgIHNpZ25lZCBUID0gMTsKLy8gICAgY2luID4+IFQ7CiAgICB3aGlsZShULS0pIHNvbHZlKCk7CiAgICByZXR1cm4gMDsKfQ=="}]