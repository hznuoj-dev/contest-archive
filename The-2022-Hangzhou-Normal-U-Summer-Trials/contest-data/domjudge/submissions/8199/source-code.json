[{"id":"8203","submission_id":"8199","filename":"c3.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+DQoNCiNkZWZpbmUgbGwgbG9uZyBsb25nDQojZGVmaW5lIFBJSSBwYWlyPGxsLCBpbnQ+DQojZGVmaW5lIGRiZyh4KSBjZXJyIDw8ICN4IDw8ICIgPSAiIDw8IHggPDwgZW5kbDsNCg0KdXNpbmcgbmFtZXNwYWNlIHN0ZDsgDQoNCmNvbnN0IGludCBOID0gMWU1ICsgMTA7DQpjb25zdCBpbnQgSU5GID0gMHgzZjNmM2YzZjsgICAgICAgICAvLyAxMDYxMTA5NTY3DQpjb25zdCBsbCBJTkZGID0gMHgzZjNmM2YzZjNmM2YzZjNmOyAvLyA0NTU3NDMwODg4Nzk4ODMwMzk5DQpjb25zdCBkb3VibGUgZXNwID0gMWUtOCwgcGkgPSBhY29zKC0xLjApOw0KY29uc3QgaW50IE1PRCA9IDk5ODI0NDM1MzsNCg0KbGwgcW1pKGludCBhLCBpbnQgYikNCnsNCiAgICBsbCByZXQgPSAxICUgTU9EOw0KICAgIHdoaWxlIChiKQ0KICAgIHsNCiAgICAgICAgaWYgKGIgJiAxKSByZXQgPSByZXQgKiAobGwpYSAlIE1PRDsNCg0KICAgICAgICBhID0gYSAqIChsbClhICUgTU9EOw0KICAgICAgICBiID4+PSAxOw0KICAgIH0NCiAgICANCiAgICByZXR1cm4gcmV0Ow0KfQ0KDQppbnQgZ2NkKGludCBhLCBpbnQgYikNCnsNCiAgICByZXR1cm4gYiA/IGdjZChiLCBhICUgYikgOiBhOw0KfQ0KDQppbnQgbG93Yml0KGludCB4KQ0Kew0KICAgIHJldHVybiB4ICYgLXg7DQp9DQoNCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIA0KDQppbnQgbiwgbTsNCmNoYXIgZ1s2MF1bNjBdOw0KYm9vbCBzdGFbNjBdWzYwXSwgc3RiWzYwXVs2MF0sIHN0WzYwXVs2MF07DQpQSUkgc2EsIHNiOw0KaW50IHJldCA9IElORjsNCmludCBjbnRbNjBdWzYwXTsNCmludCBkeFtdID0gezEsIDAsIC0xLCAwfSwgZHlbXSA9IHswLCAtMSwgMCwgMX07DQoNCnZvaWQgYmZzKCkNCnsNCiAgICBxdWV1ZTxwYWlyPFBJSSwgaW50Pj4gcWEsIHFiOw0KICAgIHFhLnB1c2goe3NhLCAwfSk7DQogICAgcWIucHVzaCh7c2IsIDB9KTsNCiAgICBzdGFbc2EuZmlyc3RdW3NhLnNlY29uZF0gPSBzdGJbc2IuZmlyc3RdW3NiLnNlY29uZF0gPSB0cnVlOw0KDQogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwMDA7IGkgKysgKQ0KICAgIHsNCiAgICAgICAgYXV0byB0YSA9IHFhLmZyb250KCk7IHFhLnBvcCgpOw0KICAgICAgICBhdXRvIHRiID0gcWIuZnJvbnQoKTsgcWIucG9wKCk7DQoNCiAgICAgICAgaW50IGF4ID0gdGEuZmlyc3QuZmlyc3QsIGF5ID0gdGEuZmlyc3Quc2Vjb25kOw0KICAgICAgICBpbnQgYnggPSB0Yi5maXJzdC5maXJzdCwgYnkgPSB0Yi5maXJzdC5zZWNvbmQ7DQoNCiAgICAgICAgaWYgKGF4ID09IGJ4ICYmIGF5ID09IGJ5KQ0KICAgICAgICB7DQogICAgICAgICAgICByZXQgPSBtaW4ocmV0LCB0YS5zZWNvbmQpOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA0OyBpICsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgaW50IHRheCA9IG1pbihuLCBheCArIGR4W2ldKSwgdGF5ID0gbWluKG4sIGF5ICsgZHlbaV0pOw0KICAgICAgICAgICAgaW50IHRieCA9IG1pbihuLCBieCArIGR4W2ldKSwgdGJ5ID0gbWluKG4sIGJ5ICsgZHlbaV0pOw0KDQogICAgICAgICAgICBpZiAoZ1t0YXhdW3RheV0gPT0gJyonKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRheCA9IGF4Ow0KICAgICAgICAgICAgICAgIHRheSA9IGF5Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGdbdGJ4XVt0YnldID09ICcqJykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0YnggPSBieDsNCiAgICAgICAgICAgICAgICB0YnkgPSBieTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcWEucHVzaCh7e3RheCwgdGF5fSwgdGEuc2Vjb25kICsgMX0pOw0KICAgICAgICAgICAgcWIucHVzaCh7e3RieCwgdGJ5fSwgdGIuc2Vjb25kICsgMX0pOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KfQ0KDQpib29sIGNoZWNrKCkNCnsNCiAgICBxdWV1ZTxQSUk+IHE7DQogICAgLy9xYS5wdXNoKHNhKTsNCiAgICAvL3FiLnB1c2goc2IpOw0KICAgIHN0W3NiLmZpcnN0XVtzYi5zZWNvbmRdID0gdHJ1ZTsNCiAgICBxLnB1c2goc2IpOw0KDQogICAgd2hpbGUgKHEuc2l6ZSgpKQ0KICAgIHsNCiAgICAgICAgYXV0byB0ID0gcS5mcm9udCgpOyBxLnBvcCgpOw0KICAgICAgICBpbnQgeCA9IHQuZmlyc3QsIHkgPSB0LnNlY29uZDsNCg0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDQ7IGkgKysgKQ0KICAgICAgICB7DQogICAgICAgICAgICBpbnQgdHggPSB4ICsgZHhbaV0sIHR5ID0geSArIGR5W2ldOw0KICAgICAgICAgICAgaWYgKHR4ID09IHNhLmZpcnN0ICYmIHR5ID09IHNhLnNlY29uZCkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICBpZiAodHggPj0gMSAmJiB0eCA8PSBuICYmIHR5ID49IDEgJiYgdHkgPD0gbiAmJiAhc3RbdHhdW3R5XSAmJiBnW3R4XVt0eV0gPT0gJy4nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0W3R4XVt0eV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIHEucHVzaCh7dHgsIHR5fSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gZmFsc2U7DQogICAgDQp9DQoNCnZvaWQgc29sdmUoKQ0Kew0KICAgIGNpbiA+PiBuOw0KICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG47IGkgKysgKQ0KICAgIHsNCiAgICAgICAgZm9yIChpbnQgaiA9IDE7IGogPD0gbjsgaiArKyApDQogICAgICAgIHsNCiAgICAgICAgICAgIGNpbiA+PiBnW2ldW2pdOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgaSArKyApDQogICAgew0KICAgICAgICBmb3IgKGludCBqID0gMTsgaiA8PSBuOyBqICsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGdbaV1bal0gPT0gJ2EnKSBzYSA9IHtpLCBqfTsNCiAgICAgICAgICAgIGlmIChnW2ldW2pdID09ICdiJykgc2IgPSB7aSwgan07DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIWNoZWNrKCkpDQogICAgew0KICAgICAgICBjb3V0IDw8ICJubyBzb2x1dGlvblxuIjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICBiZnMoKTsNCg0KICAgIGNvdXQgPDwgcmV0IDw8IGVuZGw7DQp9DQoNCmludCBtYWluKCkNCnsNCiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbygwKTsNCg0KICAgIGludCBUID0gMTsNCiAgICAvL2NpbiA+PiBUOw0KICAgIC8vc2NhbmYoIiVkIiwgJlQpOw0KICAgIC8vaW5pdCgpOw0KDQogICAgd2hpbGUgKFQtLSkNCiAgICB7DQogICAgICAgIHNvbHZlKCk7DQogICAgfQ0KDQogICAgcmV0dXJuIDA7DQp9DQo="}]