[{"id":"7588","submission_id":"7584","filename":"main.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSAgc3RkOwp0eXBlZGVmIGxvbmcgbG9uZyBsbDsKY29uc3QgaW50ICBtYXhuID0gNWU1ICsgMTA7CmNvbnN0IGludCBNT0QgPSA5OTgyNDQzNTM7CmNvbnN0IGludCBtb2QgPSAxZTkgKyA3Owpjb25zdCBsbCAgSU5GID0gMWUxODsKY29uc3QgaW50IE4gPSA1MjsKbGwgcXBvdyhsbCBhLCBsbCBiKSB7CiAgICBsbCByZXMgPSAxOwogICAgd2hpbGUoYikgewogICAgICAgIGlmKGIgJiAxKSByZXMgPSByZXMgKiBhICUgbW9kOwogICAgICAgIGEgPSBhICogYSAlIG1vZDsKICAgICAgICBiID4+PSAxOwogICAgfQogICAgcmV0dXJuIHJlczsKfQpjaGFyIGdbTl1bTl07CmludCBuOwppbnQgZFtOXVtOXVsyXTsKCmludCBkeFtdID0gezAgLDEsIDAsIC0xfTsKaW50IGR5W10gPSB7MSwgMCwgLTEsIDB9OwpzdHJ1Y3Qgbm9kZXsKICAgIHBhaXI8aW50LGludD4gcywgdDsKICAgIGludCBkOwp9Owpib29sIGNrKGludCB4LCBpbnQgeSl7CiAgICBpZih4IDwgMSB8fCB5IDwgMSlyZXR1cm4gZmFsc2U7CiAgICBpZih4ID4gbiB8fCB5ID4gbilyZXR1cm4gZmFsc2U7CiAgICBpZihnW3hdW3ldID09ICcqJylyZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKfQpib29sIHZpc1tOXVtOXVtOXVtOXTsKaW50IGJmcygpIHsKICAgIHBhaXI8aW50LGludD4gYSAsIGI7CiAgICBmb3IoaW50IGkgPSAxOyBpIDw9IG47ICsraSkgewogICAgICAgIGZvcihpbnQgaiA9IDE7IGogPD0gbjsgKytqKSB7CiAgICAgICAgICAgIGlmKGdbaV1bal0gPT0gJ2EnKSBhID0ge2kgLGp9OwogICAgICAgICAgICBpZihnW2ldW2pdID09ICdiJykgYiA9IHtpLCBqfTsKICAgICAgICB9CiAgICB9CiAgICBxdWV1ZTxub2RlPiBxOwogICAgcS5wdXNoKHthLCBiLCAwfSk7CiAgICB2aXNbYS5maXJzdF1bYS5zZWNvbmRdW2IuZmlyc3RdW2Iuc2Vjb25kXSA9IHRydWU7CiAgICB3aGlsZSghcS5lbXB0eSgpKSB7CiAgICAgICAgcGFpcjxpbnQsaW50PiB4LCB5OwogICAgICAgIHggPSBxLmZyb250KCkuczsKICAgICAgICB5ID0gcS5mcm9udCgpLnQ7CiAgICAgICAgaW50IGRpcyA9IHEuZnJvbnQoKS5kOwogICAgICAgIHEucG9wKCk7CiAgICAgICAgaWYoeCA9PSB5KSByZXR1cm4gZGlzOwogICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCA0OyArK2kpIHsKICAgICAgICAgICAgaW50IGl4MSA9IHguZmlyc3QgKyBkeFtpXTsKICAgICAgICAgICAgaW50IGl5MSA9IHguc2Vjb25kICsgZHlbaV07CiAgICAgICAgICAgIGludCBpeDIgPSB5LmZpcnN0ICsgZHhbaV07CiAgICAgICAgICAgIGludCBpeTIgPSB5LnNlY29uZCArIGR5W2ldOwogICAgICAgICAgICBpZighY2soaXgxLCBpeTEpKSB7CiAgICAgICAgICAgICAgICBpeDEgPSB4LmZpcnN0OwogICAgICAgICAgICAgICAgaXkxID0geC5zZWNvbmQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoIWNrKGl4MiwgaXkyKSkgewogICAgICAgICAgICAgICAgaXgyID0geS5maXJzdDsKICAgICAgICAgICAgICAgIGl5MiA9IHkuc2Vjb25kOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHZpc1tpeDFdW2l5MV1baXgyXVtpeTJdKWNvbnRpbnVlOwogICAgICAgICAgICB2aXNbaXgxXVtpeTFdW2l4Ml1baXkyXSA9IHRydWU7CiAgICAgICAgICAgIHEucHVzaCh7bWFrZV9wYWlyKGl4MSxpeTEpICwgbWFrZV9wYWlyKGl4MixpeTIpLCBkaXMgKyAxfSk7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAtMTsKCn0Kdm9pZCBzb2x2ZSgpewogICAgY2luID4+IG47CiAgICBmb3IoaW50IGkgPSAxOyBpIDw9IG47ICsraSkgY2luID4+IGdbaV0gKyAxOwogICAgaW50IGFucyA9IGJmcygpOwogICAgaWYoYW5zID09IC0xKSBjb3V0IDw8ICJubyBzb2x1dGlvblxuIjsKICAgIGVsc2UgY291dCA8PCBhbnMgPDwgJ1xuJzsKfQoKCnNpZ25lZCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsgY291dC50aWUobnVsbHB0cik7CiNpZmRlZiBBQ00KICAgIGZyZW9wZW4oImluLnR4dCIsInIiLHN0ZGluKTsKICAgIGZyZW9wZW4oIm91dC50eHQiLCJ3IixzdGRvdXQpOwojZW5kaWYKICAgIGludCB0ID0gMTsKLy8gICAgY2luID4+IHQ7CiAgICB3aGlsZSh0IC0tKSBzb2x2ZSgpOwp9"}]