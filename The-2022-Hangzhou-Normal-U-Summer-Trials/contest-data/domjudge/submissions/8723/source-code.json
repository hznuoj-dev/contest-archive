[{"id":"8727","submission_id":"8723","filename":"c.cpp","source":"I2luY2x1ZGU8aW9zdHJlYW0+DQojaW5jbHVkZTxhbGdvcml0aG0+DQojZGVmaW5lIGxsIGxvbmcgbG9uZw0KdXNpbmcgbmFtZXNwYWNlIHN0ZDsNCmNvbnN0IGludCBOID0gMWU1ICsgMTA7DQpzdHJ1Y3Qgbm9kZQ0Kew0KICAgIGludCBsLCByOw0KICAgIGJvb2wgbG9jazsNCiAgICBsbCBnLCBkdGFnLCBtdGFnOw0KfXRyW04gPDwgMl07DQpsbCBnY2QobGwgYSwgbGwgYil7DQogICAgaWYoYikgcmV0dXJuIGdjZChiLCBhICUgYik7DQogICAgcmV0dXJuIGE7DQp9DQp2b2lkIHB1c2h1cChpbnQgdSl7DQogICAgdHJbdV0uZyA9IGdjZCh0clt1IDw8IDFdLmcsIHRyW3UgPDwgMSB8IDFdLmcpOw0KICAgIHRyW3VdLmxvY2sgPSB0clt1IDw8IDFdLmxvY2sgfCB0clt1IDw8IDEgfCAxXS5sb2NrOw0KfQ0Kdm9pZCBwdXNoZG93bihpbnQgdSl7DQogICAgaWYodHJbdV0uZHRhZyA9PSAxICYmIHRyW3VdLm10YWcgPT0gMSkgcmV0dXJuOw0KICAgIGlmKHRyW3VdLmwgPT0gdHJbdV0ucil7DQogICAgICAgIHRyW3VdLmR0YWcgPSAxOw0KICAgICAgICB0clt1XS5tdGFnID0gMTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpbnQgbSA9IHRyW3VdLm10YWcsIGQgPSB0clt1XS5kdGFnOw0KICAgIHRyW3VdLmR0YWcgPSB0clt1XS5tdGFnID0gMTsNCiAgICBpZih0clt1IDw8IDEgfCAxXS5sID09IHRyW3UgPDwgMSB8IDFdLnIgJiYgdHJbdSA8PCAxIHwgMV0ubG9jayl7DQogICAgICAgIHRyW3UgPDwgMSB8IDFdLmR0YWcgPSAxOw0KICAgICAgICB0clt1IDw8IDEgfCAxXS5tdGFnID0gMTsNCiAgICB9ZWxzZXsNCiAgICAgICAgdHJbdSA8PCAxIHwgMV0uZyA9IHRyW3UgPDwgMSB8IDFdLmcgKiBtIC8gZDsNCiAgICAgICAgdHJbdSA8PCAxIHwgMV0ubXRhZyAqPSBtOw0KICAgICAgICB0clt1IDw8IDEgfCAxXS5kdGFnICo9IGQ7DQogICAgfQ0KICAgIGlmKHRyW3UgPDwgMV0ubCA9PSB0clt1IDw8IDFdLnIgJiYgdHJbdSA8PCAxXS5sb2NrKXsNCiAgICAgICAgdHJbdSA8PCAxXS5kdGFnID0gdHJbdSA8PCAxXS5tdGFnID0gMTsNCiAgICB9ZWxzZXsNCiAgICAgICAgdHJbdSA8PCAxXS5nID0gdHJbdSA8PCAxXS5nICogbSAvIGQ7DQogICAgICAgIHRyW3UgPDwgMV0ubXRhZyAqPSBtOw0KICAgICAgICB0clt1IDw8IDFdLmR0YWcgKj0gZDsNCiAgICB9DQp9DQp2b2lkIGJ1aWxkKGludCB1LCBpbnQgbCwgaW50IHIpew0KICAgIHRyW3VdID0ge2wsIHIsIGZhbHNlLCAxLCAxLCAxfTsNCiAgICBpZihsID09IHIpIHJldHVybjsNCiAgICBpbnQgbWlkID0gbCArIHIgPj4gMTsNCiAgICBpZihsIDw9IG1pZCkgYnVpbGQodSA8PCAxLCBsLCBtaWQpOw0KICAgIGlmKHIgPiBtaWQpIGJ1aWxkKHUgPDwgMSB8IDEsIG1pZCArIDEsIHIpOw0KfQ0KYm9vbCBjaGVjayhpbnQgdSwgaW50IGwsIGludCByLCBsbCBrKXsNCiAgICBpZih0clt1XS5sID49IGwgJiYgdHJbdV0uciA8PSByKXsNCiAgICAgICAgaWYodHJbdV0uZyAlIGspIHJldHVybiBmYWxzZTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIGJvb2wgcmVzID0gdHJ1ZTsNCiAgICBpbnQgbWlkID0gdHJbdV0ubCArIHRyW3VdLnIgPj4gMTsNCiAgICBwdXNoZG93bih1KTsNCiAgICBwdXNodXAodSk7DQogICAgaWYobCA8PSBtaWQpIHJlcyAmPSBjaGVjayh1IDw8IDEsIGwsIHIsIGspOw0KICAgIGlmKHIgPiBtaWQpIHJlcyAmPSBjaGVjayh1IDw8IDEgfCAxLCBsLCByLCBrKTsNCiAgICByZXR1cm4gcmVzOw0KfQ0Kdm9pZCBkaXYoaW50IHUsIGludCBsLCBpbnQgciwgbGwgayl7DQogICAgaWYodHJbdV0ubCA+PSBsICYmIHRyW3VdLnIgPD0gcil7DQogICAgICAgIGlmKHRyW3VdLmwgPT0gdHJbdV0uciAmJiB0clt1XS5sb2NrKXsNCiAgICAgICAgICAgIHRyW3VdLmR0YWcgPSB0clt1XS5tdGFnID0gMTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0clt1XS5nIC89IGs7DQogICAgICAgIHRyW3VdLmR0YWcgKj0gazsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpbnQgbWlkID0gdHJbdV0ubCArIHRyW3VdLnIgPj4gMTsNCiAgICBwdXNoZG93bih1KTsNCiAgICBpZihsIDw9IG1pZCkgZGl2KHUgPDwgMSwgbCwgciwgayk7DQogICAgZWxzZSBkaXYodSA8PCAxIHwgMSwgbCwgciwgayk7DQogICAgcHVzaHVwKHUpOw0KfQ0Kdm9pZCBmbGlwKGludCB1LCBpbnQgeCl7DQogICAgaWYodHJbdV0ubCA9PSB0clt1XS5yICYmIHRyW3VdLmwgPT0geCl7DQogICAgICAgIHRyW3VdLmxvY2sgPSAhdHJbdV0ubG9jazsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpbnQgbWlkID0gdHJbdV0ubCArIHRyW3VdLnIgPj4gMTsNCiAgICBwdXNoZG93bih1KTsNCiAgICBpZih4IDw9IG1pZCkgZmxpcCh1IDw8IDEsIHgpOw0KICAgIGVsc2UgZmxpcCh1IDw8IDEgfCAxLCB4KTsNCiAgICBwdXNodXAodSk7DQp9DQp2b2lkIG11bChpbnQgdSwgaW50IGwsIGludCByLCBsbCBrKXsNCiAgICBpZih0clt1XS5sID49IGwgJiYgdHJbdV0uciA8PSByKXsNCiAgICAgICAgaWYodHJbdV0ubCA9PSB0clt1XS5yICYmIHRyW3VdLmxvY2spew0KICAgICAgICAgICAgdHJbdV0ubXRhZyA9IHRyW3VdLmR0YWcgPSAxOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHRyW3VdLmcgKj0gazsNCiAgICAgICAgdHJbdV0ubXRhZyAqPSBrOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGludCBtaWQgPSB0clt1XS5sICsgdHJbdV0uciA+PiAxOw0KICAgIHB1c2hkb3duKHUpOw0KICAgIGlmKGwgPD0gbWlkKSBtdWwodSA8PCAxLCBsLCByLCBrKTsNCiAgICBpZihyID4gbWlkKSBtdWwodSA8PCAxIHwgMSwgbCwgciwgayk7DQogICAgcHVzaHVwKHUpOw0KfQ0KaW50IG1haW4oKXsNCiAgICBpbnQgbiwgbTsNCiAgICBzY2FuZigiJWQlZCIsICZuLCAmbSk7DQogICAgYnVpbGQoMSwgMSwgbik7DQogICAgY2hhciBvcFs1XTsNCiAgICB3aGlsZShtLS0pew0KICAgICAgICBzY2FuZigiICVzIiwgb3ApOw0KICAgICAgICBpZigqb3AgPT0gJ2YnKXsNCiAgICAgICAgICAgIGludCB4Ow0KICAgICAgICAgICAgc2NhbmYoIiVkIiwgJngpOw0KICAgICAgICAgICAgZmxpcCgxLCB4KTsNCiAgICAgICAgfWVsc2UgaWYoKm9wID09ICdkJyl7DQogICAgICAgICAgICBpbnQgbCwgcjsgDQogICAgICAgICAgICBsbCBrOw0KICAgICAgICAgICAgc2NhbmYoIiVkJWQlbGxkIiwgJmwsICZyLCAmayk7DQogICAgICAgICAgICBpZihjaGVjaygxLCBsLCByLCBrKSl7DQogICAgICAgICAgICAgICAgcHV0cygiWUVTIik7DQogICAgICAgICAgICAgICAgZGl2KDEsIGwgLCByLCBrKTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHB1dHMoIk5PIik7DQogICAgICAgICAgICB9DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgaW50IGwsIHI7DQogICAgICAgICAgICBsbCBrOw0KICAgICAgICAgICAgc2NhbmYoIiVkJWQlbGxkIiwgJmwsICZyLCAmayk7DQogICAgICAgICAgICBtdWwoMSwgbCwgciwgayk7DQogICAgICAgIH0NCiAgICB9DQp9"}]