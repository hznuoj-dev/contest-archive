[{"id":"8418","submission_id":"8414","filename":"main.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CiNkZWZpbmUgbGwgbG9uZyBsb25nCmNvbnN0IHNpZ25lZCBJTkYgPSAxZTk7CmNvbnN0IHNpZ25lZCBtYXhuID0gMTAwMDE5Owpjb25zdCBzaWduZWQgbW9kZSA9IDFlOSArIDc7CgpzdHJ1Y3Qgc2VnVHJlZXsKICAgIGludCBsZ2NkW21heG4gPDwgNF0sIHJnY2RbbWF4biA8PCA0XTsKICAgIGludCBtdWxbbWF4biA8PCA0XSwgZGl2W21heG4gPDwgNF07CiAgICB2b2lkIHB1c2hfdXAoaW50IHApewogICAgICAgIGxnY2RbcF0gPSBfX2djZChsZ2NkW3AgKiAyXSwgbGdjZFtwKjIrMV0pOwogICAgICAgIHJnY2RbcF0gPSBfX2djZChyZ2NkW3AgKiAyXSwgcmdjZFtwKjIrMV0pOwogICAgfQogICAgdm9pZCBwdXNoX211bChpbnQgcCwgaW50IG0pewogICAgICAgIHJnY2RbcF0gKj0gbTsKICAgICAgICBtdWxbcF0gKj0gbTsKICAgIH0KICAgIHZvaWQgcHVzaF9kaXYoaW50IHAsIGludCBtKXsKICAgICAgICByZ2NkW3BdIC89IG07CiAgICAgICAgZGl2W3BdICo9IG07CiAgICB9CiAgICB2b2lkIHB1c2hfZG93bihpbnQgcCl7CiAgICAgICAgaWYobXVsW3BdICE9IDEpewogICAgICAgICAgICBwdXNoX211bChwKjIsIG11bFtwXSk7CiAgICAgICAgICAgIHB1c2hfbXVsKHAqMisxLCBtdWxbcF0pOwogICAgICAgICAgICBtdWxbcF0gPSAxOwogICAgICAgIH0KICAgICAgICBpZihkaXZbcF0gIT0gMSl7CiAgICAgICAgICAgIHB1c2hfZGl2KHAqMiwgZGl2W3BdKTsKICAgICAgICAgICAgcHVzaF9kaXYocCoyKzEsIGRpdltwXSk7CiAgICAgICAgICAgIGRpdltwXSA9IDE7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgYnVpbGQoaW50IHAsIGludCBsLCBpbnQgcil7CiAgICAgICAgbGdjZFtwXSA9IDAsIHJnY2RbcF0gPSAxOwogICAgICAgIG11bFtwXSA9IGRpdltwXSA9IDE7CiAgICAgICAgaWYobCA9PSByKSByZXR1cm47CiAgICAgICAgaW50IG1pZCA9IChsICsgcikgLyAyOwogICAgICAgIGJ1aWxkKHAqMiwgbCwgbWlkKTsKICAgICAgICBidWlsZChwKjIrMSwgbWlkKzEsIHIpOwogICAgfQogICAgdm9pZCBtdWx0aXB5KGludCBwLCBpbnQgbCwgaW50IHIsIGludCBMLCBpbnQgUiwgaW50IG0sIGJvb2wgZCl7CiAgICAgICAgaWYoTCA+IHIgfHwgbCA+IFIpIHJldHVybjsKICAgICAgICBpZihMIDw9IGwgJiYgciA8PSBSKXsKICAgICAgICAgICAgaWYoIWQpIHB1c2hfbXVsKHAsIG0pOwogICAgICAgICAgICBlbHNlIHB1c2hfZGl2KHAsIG0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHB1c2hfZG93bihwKTsKICAgICAgICBpbnQgbWlkID0gKGwgKyByKSAvIDI7CiAgICAgICAgbXVsdGlweShwKjIsIGwsIG1pZCwgTCwgUiwgbSwgZCk7CiAgICAgICAgbXVsdGlweShwKjIrMSwgbWlkKzEsIHIsIEwsIFIsIG0sIGQpOwogICAgICAgIHB1c2hfdXAocCk7CiAgICB9CiAgICBpbnQgcXVlcnkoaW50IHAsIGludCBsLCBpbnQgciwgaW50IEwsIGludCBSKXsKICAgICAgICBpZihMID4gciB8fCBsID4gUikgcmV0dXJuIDA7CiAgICAgICAgaWYoTCA8PSBsICYmIHIgPD0gUil7CiAgICAgICAgICAgIHJldHVybiBfX2djZChsZ2NkW3BdLCByZ2NkW3BdKTsKICAgICAgICB9CiAgICAgICAgcHVzaF9kb3duKHApOwogICAgICAgIGludCBtaWQgPSAobCArIHIpIC8gMjsKICAgICAgICBpbnQgcmVzID0gX19nY2QocXVlcnkocCoyLCBsLCBtaWQsIEwsIFIpLAogICAgICAgICAgICAgICAgICAgICAgcXVlcnkocCoyKzEsIG1pZCsxLCByLCBMLCBSKSk7CiAgICAgICAgcHVzaF91cChwKTsKICAgICAgICByZXR1cm4gcmVzOwogICAgfQogICAgdm9pZCBmaWxwKGludCBwLCBpbnQgbCwgaW50IHIsIGludCB4KXsKICAgICAgICBpZihsID09IHIpewogICAgICAgICAgICBzd2FwKGxnY2RbcF0sIHJnY2RbcF0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHB1c2hfZG93bihwKTsKICAgICAgICBpbnQgbWlkID0gKGwgKyByKSAvIDI7CiAgICAgICAgaWYoeCA8PSBtaWQpIGZpbHAocCoyLCBsLCBtaWQsIHgpOwogICAgICAgIGVsc2UgZmlscChwKjIrMSwgbWlkKzEsIHIsIHgpOwogICAgICAgIHB1c2hfdXAocCk7CiAgICB9Cn1zZWd0OwoKdm9pZCBzb2x2ZSgpewogICAgaW50IG4sIG07CiAgICBjaW4gPj4gbiA+PiBtOwogICAgc2VndC5idWlsZCgxLCAxLCBuKTsKICAgIGZvcihpbnQgaT0xO2k8PW07aSsrKXsKICAgICAgICBzdHJpbmcgb3B0OwogICAgICAgIGludCB4LCB5LCB6OwogICAgICAgIGNpbiA+PiBvcHQ7CiAgICAgICAgaWYob3B0ID09ICJtdWwiKXsKICAgICAgICAgICAgY2luID4+IHggPj4geSA+PiB6OwogICAgICAgICAgICBzZWd0Lm11bHRpcHkoMSwgMSwgbiwgeCwgeSwgeiwgMCk7CiAgICAgICAgfWVsc2UgaWYob3B0ID09ICJkaXYiKXsKICAgICAgICAgICAgY2luID4+IHggPj4geSA+PiB6OwogICAgICAgICAgICBpbnQgcmVzID0gc2VndC5xdWVyeSgxLCAxLCBuLCB4LCB5KTsKICAgICAgICAgICAgaWYocmVzICUgeiA9PSAwKXsKICAgICAgICAgICAgICAgIHNlZ3QubXVsdGlweSgxLCAxLCBuLCB4LCB5LCB6LCAxKTsKICAgICAgICAgICAgICAgIGNvdXQgPDwgIllFU1xuIjsKICAgICAgICAgICAgfWVsc2UgY291dCA8PCAiTk9cbiI7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGNpbiA+PiB4OwogICAgICAgICAgICBzZWd0LmZpbHAoMSwgMSwgbiwgeCk7CiAgICAgICAgfQogICAgfQp9CgpzaWduZWQgbWFpbigpIHsKI2lmZGVmIExPQ0FMCiAgICBmcmVvcGVuKCJ4LmluIiwgInIiLCBzdGRpbik7CiNlbmRpZgogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKICAgIGNvdXQudGllKG51bGxwdHIpOwoKICAgIHNpZ25lZCBUID0gMTsKLy8gICAgY2luID4+IFQ7CiAgICB3aGlsZShULS0pIHNvbHZlKCk7CiAgICByZXR1cm4gMDsKfQ=="}]