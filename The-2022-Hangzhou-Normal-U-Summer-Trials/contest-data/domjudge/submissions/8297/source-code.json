[{"id":"8301","submission_id":"8297","filename":"c3.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+DQoNCiNkZWZpbmUgbGwgbG9uZyBsb25nDQojZGVmaW5lIFBJSSBwYWlyPGxsLCBpbnQ+DQojZGVmaW5lIGRiZyh4KSBjZXJyIDw8ICN4IDw8ICIgPSAiIDw8IHggPDwgZW5kbDsNCg0KdXNpbmcgbmFtZXNwYWNlIHN0ZDsgDQoNCmNvbnN0IGludCBOID0gMWU1ICsgMTA7DQpjb25zdCBpbnQgSU5GID0gMHgzZjNmM2YzZjsgICAgICAgICAvLyAxMDYxMTA5NTY3DQpjb25zdCBsbCBJTkZGID0gMHgzZjNmM2YzZjNmM2YzZjNmOyAvLyA0NTU3NDMwODg4Nzk4ODMwMzk5DQpjb25zdCBkb3VibGUgZXNwID0gMWUtOCwgcGkgPSBhY29zKC0xLjApOw0KY29uc3QgaW50IE1PRCA9IDk5ODI0NDM1MzsNCg0KbGwgcW1pKGludCBhLCBpbnQgYikNCnsNCiAgICBsbCByZXQgPSAxICUgTU9EOw0KICAgIHdoaWxlIChiKQ0KICAgIHsNCiAgICAgICAgaWYgKGIgJiAxKSByZXQgPSByZXQgKiAobGwpYSAlIE1PRDsNCg0KICAgICAgICBhID0gYSAqIChsbClhICUgTU9EOw0KICAgICAgICBiID4+PSAxOw0KICAgIH0NCiAgICANCiAgICByZXR1cm4gcmV0Ow0KfQ0KDQppbnQgZ2NkKGludCBhLCBpbnQgYikNCnsNCiAgICByZXR1cm4gYiA/IGdjZChiLCBhICUgYikgOiBhOw0KfQ0KDQppbnQgbG93Yml0KGludCB4KQ0Kew0KICAgIHJldHVybiB4ICYgLXg7DQp9DQoNCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIA0KDQppbnQgbiwgbTsNCmNoYXIgZ1s2MF1bNjBdOw0KYm9vbCBzdGFbNjBdWzYwXSwgc3RiWzYwXVs2MF0sIHN0WzYwXVs2MF07DQpQSUkgc2EsIHNiOw0KaW50IHJldCA9IElORjsNCmludCBjbnRbNjBdWzYwXTsNCmludCBkeFtdID0gezEsIDAsIC0xLCAwfSwgZHlbXSA9IHswLCAtMSwgMCwgMX07DQoNCnZvaWQgYmZzKCkNCnsNCiAgICBxdWV1ZTxwYWlyPFBJSSwgaW50Pj4gcWEsIHFiOw0KICAgIHFhLnB1c2goe3NhLCAwfSk7DQogICAgcWIucHVzaCh7c2IsIDB9KTsNCiAgICBzdGFbc2EuZmlyc3RdW3NhLnNlY29uZF0gPSBzdGJbc2IuZmlyc3RdW3NiLnNlY29uZF0gPSB0cnVlOw0KDQogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwMDAwOyBpICsrICkNCiAgICB7DQogICAgICAgIGF1dG8gdGEgPSBxYS5mcm9udCgpOyBxYS5wb3AoKTsNCiAgICAgICAgYXV0byB0YiA9IHFiLmZyb250KCk7IHFiLnBvcCgpOw0KDQogICAgICAgIGludCBheCA9IHRhLmZpcnN0LmZpcnN0LCBheSA9IHRhLmZpcnN0LnNlY29uZDsNCiAgICAgICAgaW50IGJ4ID0gdGIuZmlyc3QuZmlyc3QsIGJ5ID0gdGIuZmlyc3Quc2Vjb25kOw0KDQogICAgICAgIGlmIChheCA9PSBieCAmJiBheSA9PSBieSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0ID0gbWluKHJldCwgdGEuc2Vjb25kKTsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA0OyBpICsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgaW50IHRheCA9IGF4ICsgZHhbaV0sIHRheSA9IGF5ICsgZHlbaV07DQogICAgICAgICAgICBpbnQgdGJ4ID0gYnggKyBkeFtpXSwgdGJ5ID0gYnkgKyBkeVtpXTsNCg0KICAgICAgICAgICAgaWYgKCF0YXgpIHRheCA9IDE7DQogICAgICAgICAgICBpZiAoIXRheSkgdGF5ID0gMTsNCiAgICAgICAgICAgIGlmICghdGJ4KSB0YnggPSAxOw0KICAgICAgICAgICAgaWYgKCF0YnkpIHRieSA9IDE7DQoNCiAgICAgICAgICAgIGlmICh0YXggPiBuKSB0YXggPSBuOw0KICAgICAgICAgICAgaWYgKHRheSA+IG4pIHRheSA9IG47DQogICAgICAgICAgICBpZiAodGJ4ID4gbikgdGJ4ID0gbjsNCiAgICAgICAgICAgIGlmICh0YnkgPiBuKSB0YnkgPSBuOyAgICAgICAgICAgDQoNCiAgICAgICAgICAgIGlmIChnW3RheF1bdGF5XSA9PSAnKicpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGF4ID0gYXg7DQogICAgICAgICAgICAgICAgdGF5ID0gYXk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZ1t0YnhdW3RieV0gPT0gJyonKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRieCA9IGJ4Ow0KICAgICAgICAgICAgICAgIHRieSA9IGJ5Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBxYS5wdXNoKHt7dGF4LCB0YXl9LCB0YS5zZWNvbmQgKyAxfSk7DQogICAgICAgICAgICBxYi5wdXNoKHt7dGJ4LCB0Ynl9LCB0Yi5zZWNvbmQgKyAxfSk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQp9DQoNCmJvb2wgY2hlY2soKQ0Kew0KICAgIHF1ZXVlPFBJST4gcTsNCiAgICAvL3FhLnB1c2goc2EpOw0KICAgIC8vcWIucHVzaChzYik7DQogICAgc3Rbc2IuZmlyc3RdW3NiLnNlY29uZF0gPSB0cnVlOw0KICAgIHEucHVzaChzYik7DQoNCiAgICB3aGlsZSAocS5zaXplKCkpDQogICAgew0KICAgICAgICBhdXRvIHQgPSBxLmZyb250KCk7IHEucG9wKCk7DQogICAgICAgIGludCB4ID0gdC5maXJzdCwgeSA9IHQuc2Vjb25kOw0KDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNDsgaSArKyApDQogICAgICAgIHsNCiAgICAgICAgICAgIGludCB0eCA9IHggKyBkeFtpXSwgdHkgPSB5ICsgZHlbaV07DQogICAgICAgICAgICBpZiAodHggPT0gc2EuZmlyc3QgJiYgdHkgPT0gc2Euc2Vjb25kKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGlmICh0eCA+PSAxICYmIHR4IDw9IG4gJiYgdHkgPj0gMSAmJiB0eSA8PSBuICYmICFzdFt0eF1bdHldICYmIGdbdHhdW3R5XSA9PSAnLicpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc3RbdHhdW3R5XSA9IHRydWU7DQogICAgICAgICAgICAgICAgcS5wdXNoKHt0eCwgdHl9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCiAgICANCn0NCg0Kdm9pZCBzb2x2ZSgpDQp7DQogICAgY2luID4+IG47DQogICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgaSArKyApDQogICAgew0KICAgICAgICBmb3IgKGludCBqID0gMTsgaiA8PSBuOyBqICsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgY2luID4+IGdbaV1bal07DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmb3IgKGludCBpID0gMTsgaSA8PSBuOyBpICsrICkNCiAgICB7DQogICAgICAgIGZvciAoaW50IGogPSAxOyBqIDw9IG47IGogKysgKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoZ1tpXVtqXSA9PSAnYScpIHNhID0ge2ksIGp9Ow0KICAgICAgICAgICAgaWYgKGdbaV1bal0gPT0gJ2InKSBzYiA9IHtpLCBqfTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICghY2hlY2soKSkNCiAgICB7DQogICAgICAgIGNvdXQgPDwgIm5vIHNvbHV0aW9uXG4iOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIGJmcygpOw0KDQogICAgY291dCA8PCByZXQgPDwgZW5kbDsNCn0NCg0KaW50IG1haW4oKQ0Kew0KICAgIGlvczo6c3luY193aXRoX3N0ZGlvKDApOw0KDQogICAgaW50IFQgPSAxOw0KICAgIC8vY2luID4+IFQ7DQogICAgLy9zY2FuZigiJWQiLCAmVCk7DQogICAgLy9pbml0KCk7DQoNCiAgICB3aGlsZSAoVC0tKQ0KICAgIHsNCiAgICAgICAgc29sdmUoKTsNCiAgICB9DQoNCiAgICByZXR1cm4gMDsNCn0NCg=="}]