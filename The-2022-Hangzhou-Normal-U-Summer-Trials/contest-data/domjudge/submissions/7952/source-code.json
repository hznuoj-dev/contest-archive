[{"id":"7956","submission_id":"7952","filename":"submit.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+DQp1c2luZyBuYW1lc3BhY2Ugc3RkOw0KdXNpbmcgbGwgPSBsb25nIGxvbmc7DQp1c2luZyBUID0gcGFpcjxpbnQsIGludD47DQoNCmNvbnN0IGludCBOID0gMTU1Ow0KDQppbnQgbjsNCmNoYXIgZ1tOXVtOXTsNClQgYSwgYjsNCg0KdXNpbmcgc3RhdGUgPSBwYWlyPFQsIFQ+Ow0KDQp1c2luZyBUUCA9IHBhaXI8aW50LCBzdGF0ZT47DQoNCnNldDxzdGF0ZT4gUzsNCg0KY29uc3QgaW50IGRyW10gPSB7IC0xLCAwLCAxLCAwIH07DQpjb25zdCBpbnQgZGNbXSA9IHsgMCwgMSwgMCwgLTEgfTsNCg0KYm9vbCBpc19sZWdhbCAoVCB4KSB7DQogICAgcmV0dXJuIHguZmlyc3QgPj0gMSAmJiB4LmZpcnN0IDw9IG4gJiYgeC5zZWNvbmQgPj0gMSAmJiB4LnNlY29uZCA8PSBuIFwNCiAgICAgICAgJiYgZ1t4LmZpcnN0XVt4LnNlY29uZF0gIT0gJyonOw0KfQ0KDQpzaWduZWQgbWFpbiAoKQ0Kew0KICAgIHNjYW5mKCIlZCIsICZuKTsNCiAgICBmb3IgKGludCBpID0gMTsgaSA8PSBuOyBpICsrICkgc2NhbmYoIiVzIiwgZ1tpXSArIDEpOw0KICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG47IGkgKysgKQ0KICAgICAgICBmb3IgKGludCBqID0gMTsgaiA8PSBuOyBqICsrICkgew0KICAgICAgICAgICAgaWYgKGdbaV1bal0gPT0gJ2EnKSBhID0ge2ksIGp9Ow0KICAgICAgICAgICAgaWYgKGdbaV1bal0gPT0gJ2InKSBiID0ge2ksIGp9Ow0KICAgICAgICB9DQogICAgcHJpb3JpdHlfcXVldWU8VFAsIHZlY3RvcjxUUD4sIGdyZWF0ZXI8Pj4gcHE7DQogICAgcHEucHVzaCh7MCwge2EsIGJ9fSk7DQogICAgUy5pbnNlcnQoe2EsIGJ9KTsNCiAgICB3aGlsZShwcS5zaXplKCkpIHsNCiAgICAgICAgYXV0byBbc3RlcCwgUF0gPSBwcS50b3AoKTsNCiAgICAgICAgYXV0byBbbmEsIG5iXSA9IFA7DQovLyAgICAgICAgY291dCA8PCBuYS5maXJzdCA8PCAnICcgPDwgbmEuc2Vjb25kIDw8ICcgJzsNCi8vICAgICAgICBjb3V0IDw8IG5iLmZpcnN0IDw8ICcgJyA8PCBuYi5zZWNvbmQgPDwgZW5kbDsNCiAgICAgICAgcHEucG9wKCk7DQoNCiAgICAgICAgaWYgKG5hID09IG5iKSByZXR1cm4gY291dCA8PCBzdGVwIDw8ICdcbicsIDA7DQoNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA0OyBpICsrICkgew0KICAgICAgICAgICAgVCBueHQxID0geyBuYS5maXJzdCArIGRyW2ldLCBuYS5zZWNvbmQgKyBkY1tpXSB9Ow0KICAgICAgICAgICAgVCBueHQyID0geyBuYi5maXJzdCArIGRyW2ldLCBuYi5zZWNvbmQgKyBkY1tpXSB9Ow0KLy8gICAgICAgICAgICBjb3V0IDw8ICJuZXh0ICIgPDwgZW5kbDsNCi8vICAgICAgICAgICAgY291dCA8PCBueHQxLmZpcnN0IDw8ICcgJyA8PCBueHQxLnNlY29uZCA8PCBlbmRsOw0KLy8gICAgICAgICAgICBjb3V0IDw8IG54dDIuZmlyc3QgPDwgJyAnIDw8IG54dDIuc2Vjb25kIDw8IGVuZGw7DQogICAgICAgICAgICBpZiAoaXNfbGVnYWwobnh0MSkgJiYgIWlzX2xlZ2FsKG54dDIpKSB7DQovLyAgICAgICAgICAgICAgICBjb3V0IDw8ICJsZyBubGciIDw8IGVuZGw7DQogICAgICAgICAgICAgICAgaWYgKFMuZmluZCh7bnh0MSwgbmJ9KSA9PSBTLmVuZCgpKSB7DQogICAgICAgICAgICAgICAgICAgIFMuaW5zZXJ0KHtueHQxLCBuYn0pOw0KICAgICAgICAgICAgICAgICAgICBwcS5wdXNoKHtzdGVwICsgMSwge254dDEsIG5ifX0pOw0KLy8gICAgICAgICAgICAgICAgICAgIGNvdXQgPDwgInB1c2ggIiA8PCAieWVzIG5vXG4iOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNfbGVnYWwobnh0MSkgJiYgaXNfbGVnYWwobnh0MikpIHsNCi8vICAgICAgICAgICAgICAgIGNvdXQgPDwgImxnIGxnIiA8PCBlbmRsOw0KLy8gICAgICAgICAgICAgICAgaWYgKG54dDEgPT0gVHsxLCAxfSAmJiBueHQyID09IFR7MSwgMn0pIHsNCi8vICAgICAgICAgICAgICAgICAgICBjb3V0IDw8ICJjaGVjayIgPDwgZW5kbDsNCi8vICAgICAgICAgICAgICAgICAgICBmb3IgKGF1dG8gczogUykgew0KLy8gICAgICAgICAgICAgICAgICAgICAgICBjb3V0IDw8IHMuYS5maXJzdCA8PCAnICcgPDwgcy5hLnNlY29uZCA8PCBlbmRsOw0KLy8gICAgICAgICAgICAgICAgICAgICAgICBjb3V0IDw8IHMuYi5maXJzdCA8PCAnICcgPDwgcy5iLnNlY29uZCA8PCBlbmRsOw0KLy8gICAgICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgICAgICBjb3V0IDw8IChTLmZpbmQoe254dDEsIG54dDJ9KSA9PSBTLmVuZCgpKSA8PCBlbmRsOw0KLy8gICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChTLmZpbmQoe254dDEsIG54dDJ9KSA9PSBTLmVuZCgpKSB7DQogICAgICAgICAgICAgICAgICAgIFMuaW5zZXJ0KHtueHQxLCBueHQyfSk7DQogICAgICAgICAgICAgICAgICAgIHBxLnB1c2goe3N0ZXAgKyAxLCB7bnh0MSwgbnh0Mn19KTsNCi8vICAgICAgICAgICAgICAgICAgICBjb3V0IDw8ICJwdXNoICIgPDwgInllcyB5ZXNcbiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmICghaXNfbGVnYWwobnh0MSkgJiYgaXNfbGVnYWwobnh0MikpIHsNCi8vICAgICAgICAgICAgICAgIGNvdXQgPDwgIm5sZyBsZyIgPDwgZW5kbDsNCiAgICAgICAgICAgICAgICBpZiAoUy5maW5kKHtuYSwgbnh0Mn0pID09IFMuZW5kKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgUy5pbnNlcnQoe25hLCBueHQyfSk7DQogICAgICAgICAgICAgICAgICAgIHBxLnB1c2goe3N0ZXAgKyAxLCB7bmEsIG54dDJ9fSk7DQovLyAgICAgICAgICAgICAgICAgICAgY291dCA8PCAicHVzaCAiIDw8ICJubyB5ZXNcbiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNvdXQgPDwgIm5vIHNvbHV0aW9uIjsNCiAgICByZXR1cm4gMDsNCn0="}]