[{"id":"3165","submission_id":"3165","filename":"b.cpp","source":"I2luY2x1ZGU8Yml0cy9zdGRjKysuaD4NCnVzaW5nIG5hbWVzcGFjZSBzdGQ7DQojZGVmaW5lIGludCBsb25nIGxvbmcNCmlubGluZSBpbnQgcmVhZCgpew0KICAgIGludCB4PTAsZj0xO2NoYXIgYz1nZXRjaGFyKCk7DQogICAgd2hpbGUoIWlzZGlnaXQoYykpe2lmKGM9PSctJylmPS0xO2M9Z2V0Y2hhcigpO30NCiAgICB3aGlsZShpc2RpZ2l0KGMpKXg9eCoxMCtjLTQ4LGM9Z2V0Y2hhcigpOw0KICAgIHJldHVybiB4KmY7DQp9DQpjb25zdCBpbnQgTj0xZTUrNTsNCmludCBuLHEsbSxmYVtOPDwxXSxzeltOPDwxXSxmW048PDFdLHZpc1tOPDwxXTsNCmludCBmaW5kKGludCB4KXsNCiAgICByZXR1cm4geD09ZmFbeF0/eDpmYVt4XT1maW5kKGZhW3hdKTsNCn0NCnZvaWQgbWVyZ2UoaW50IHgsaW50IHkpew0KICAgIHg9ZmluZCh4KTt5PWZpbmQoeSk7DQogICAgaWYoeD09eSlyZXR1cm47DQogICAgaWYoeDx5KXN3YXAoeCx5KTsNCiAgICBmYVt4XT15O3N6W3ldKz1zelt4XTtmW3ldKz1mW3hdOw0KfQ0KYml0c2V0PE4+Z1tOXTsNCnZlY3RvcjxpbnQ+YW5zW05dOw0KdmVjdG9yPHBhaXI8aW50LGludD4gPmM7DQp2ZWN0b3I8cGFpcjxpbnQsaW50PiA+djsNCnZvaWQgcHJpbnQoaW50IHgpew0KICAgLy8gcHJpbnRmKCIlbGxkXG4iLHgpOw0KICAgIGZvcihpbnQgaTphbnNbeF0pcHJpbnRmKCIlbGxkICIsaSk7DQogICAvLyBwdXRzKCIiKTsNCn0NCnZvaWQgZGZzKGludCB4LGludCBzdW0pDQp7DQogICAgaWYoeD09MClyZXR1cm47DQogICAgaWYoc3VtLXZbeC0xXS5maXJzdD49MCYmZ1t4LTFdW3N1bS12W3gtMV0uZmlyc3RdKSBkZnMoeC0xLHN1bS12W3gtMV0uZmlyc3QpLHByaW50KGNbeC0xXS5maXJzdCk7DQogICAgZWxzZSBkZnMoeC0xLHN1bS12W3gtMV0uc2Vjb25kKSxwcmludChjW3gtMV0uc2Vjb25kKTsNCn0NCnNpZ25lZCBtYWluKCl7DQogICAgbj1yZWFkKCk7cT1yZWFkKCk7bT1yZWFkKCk7DQogICAgZm9yKGludCBpPTE7aTw9KG48PDEpO2krKylmYVtpXT1pLHN6W2ldPTEsZltpXT0oaTw9bik7DQogICAgZm9yKGludCBpPTE7aTw9bTtpKyspew0KICAgICAgICBpbnQgb3A9cmVhZCgpLGE9cmVhZCgpLGI9cmVhZCgpOw0KICAgICAgICBpZihvcD09MCl7DQogICAgICAgICAgICBtZXJnZShhLGIpOw0KICAgICAgICAgICAgbWVyZ2UoYStuLGIrbik7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgbWVyZ2UoYSxiK24pOw0KICAgICAgICAgICAgbWVyZ2UoYixhK24pOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZvcihpbnQgaT0xO2k8PW47aSsrKWlmKGZpbmQoaSk9PWZpbmQoaStuKSl7cHV0cygiTk8iKTtyZXR1cm4gMDt9DQogICAvLyBwdXRzKCJxd3EiKTsNCiAgICBmb3IoaW50IGk9MTtpPD1uO2krKylpZihmaW5kKGkpPT1pKXsNCiAgICAgICAgaWYodmlzW2ldfHx2aXNbZmluZChpK24pXSljb250aW51ZTsNCiAgICAgICAgdi5wdXNoX2JhY2soe2ZbaV0sZltmaW5kKGkrbildfSksYy5wdXNoX2JhY2soe2ksZmluZChpK24pfSk7DQogICAgICAgIHZpc1tpXT12aXNbZmluZChpK24pXT0xOw0KICAgIH0NCiAgICBmb3IoaW50IGk9MTtpPD1uO2krKylhbnNbZmluZChpKV0ucHVzaF9iYWNrKGkpOw0KICAgIGludCBjbnQ9di5zaXplKCk7DQogICAgZ1swXVswXT0xOw0KICAgIC8vZm9yKGludCBpPTE7aTw9Y250O2krKylwcmludGYoIiVsbGQgJWxsZFxuIixjW2ktMV0uZmlyc3QsY1tpLTFdLnNlY29uZCk7cHV0cygiIik7DQogICAgZm9yKGludCBpPTE7aTw9Y250O2krKylnW2ldPShnW2ktMV08PHZbaS0xXS5maXJzdCl8KGdbaS0xXTw8dltpLTFdLnNlY29uZCl8Z1tpLTFdOw0KICAgIC8vZm9yKGludCBpPTE7aTw9bjtpKyspcHJpbnRmKCIlbGxkICIsZ1tjbnRdW2ldPT0xKTtwdXRzKCIiKTsNCiAgICBpZighZ1tjbnRdW3FdKXtwdXRzKCJOTyIpO3JldHVybiAwO30NCiAgICBwdXRzKCJZRVMiKTsNCiAgICBkZnMoY250LHEpOw0KICAgIHJldHVybiAwOw0KfQ=="}]