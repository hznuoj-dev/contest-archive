[{"id":"3285","submission_id":"3285","filename":"4.cpp","source":"I2luY2x1ZGU8Yml0cy9zdGRjKysuaD4NCnVzaW5nIG5hbWVzcGFjZSBzdGQ7DQp0eXBlZGVmIGxvbmcgbG9uZyBsbDsNCmNvbnN0IGludCBOPTFlNisxMDsNCmNvbnN0IGludCBtYXhuPTEwOw0Kc3RydWN0IG5vZGUNCnsNCiAgICBpbnQgdix0Ow0KfTsNCnZlY3RvcjxzdHJ1Y3Qgbm9kZT52ZWNbTl07DQoNCmludCBjb1tOXTsNCmludCBjbnRbM10sUSxuOw0KYm9vbCBmbGFnPTA7DQoNCnN0cnVjdCBQew0KICAgIGludCBhLGIsdDsNCiAgICBQKGludCBhPTAsaW50IGI9MCxpbnQgdD0wKTphKGEpLGIoYiksdCh0KSB7fQ0KICAgIGJvb2wgb3BlcmF0b3IgPChjb25zdCBQJiByaHMpY29uc3R7DQogICAgICAgIHJldHVybiBhPnJocy5hOw0KICAgIH0NCn07DQoNCnZlY3RvcjxQPnN6Ow0KdmVjdG9yPGludD5wZW9wbGVbTl1bM107DQppbnQgbm93PTA7DQp2ZWN0b3I8cGFpcjxpbnQsaW50PiA+aWQ7DQoNCnZvaWQgZGZzKGludCBpLGludCBjKQ0Kew0KICAgIGlmKGZsYWcpcmV0dXJuOw0KICAgIGNvW2ldPWM7DQogICAgY250W2NdKys7DQogICAgcGVvcGxlW25vd11bY10ucHVzaF9iYWNrKGkpOw0KICAgIGZvcihhdXRvIGo6dmVjW2ldKQ0KICAgIHsNCiAgICAgICAgaWYoZmxhZylyZXR1cm47DQogICAgICAgIGlmKCFjb1tqLnZdKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZihqLnQ9PTApZGZzKGoudixjKTsNCiAgICAgICAgICAgIGVsc2UgZGZzKGoudiwzLWMpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYoai50PT0wJiZjb1tqLnZdIT1jKXtmbGFnPTE7cmV0dXJuO30NCiAgICAgICAgICAgIGVsc2UgaWYoai50PT0xJiZjb1tqLnZdPT1jKXtmbGFnPTE7cmV0dXJuO30NCiAgICAgICAgfQ0KICAgIH0NCn0NCnZlY3RvcjxpbnQ+YW5zOw0KDQpib29sIHNvbHZlKGludCBkZXAsaW50IHN1bSl7DQogICAgaWYoc3VtPlEpIHJldHVybiBmYWxzZTsNCiAgICBpZihkZXA9PXN6LnNpemUoKSl7DQogICAgICAgIGlmKHN1bT09USl7DQogICAgICAgICAgICBwcmludGYoIllFU1xuIik7DQogICAgICAgICAgICBmb3IoYXV0byBwOmlkKXsNCiAgICAgICAgICAgICAgICBpZihwLmZpcnN0PT0xKXsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGF1dG8gcTpwZW9wbGVbcC5zZWNvbmRdWzJdKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFucy5wdXNoX2JhY2socSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGF1dG8gcTpwZW9wbGVbcC5zZWNvbmRdWzFdKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFucy5wdXNoX2JhY2socSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzb3J0KGFucy5iZWdpbigpLGFucy5lbmQoKSk7DQogICAgICAgICAgICBmb3IoYXV0byBwOmFucykgcHJpbnRmKCIlZCAiLHApOw0KICAgICAgICAgICAgcHJpbnRmKCJcbiIpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIGlkLnB1c2hfYmFjayh7MCxzeltkZXBdLnR9KTsNCiAgICBpZihzb2x2ZShkZXArMSxzdW0rc3pbZGVwXS5hKSl7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCiAgICBpZC5wb3BfYmFjaygpOw0KICAgIGlkLnB1c2hfYmFjayh7MSxzeltkZXBdLnR9KTsNCiAgICBpZihzb2x2ZShkZXArMSxzdW0rc3pbZGVwXS5iKSl7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCiAgICBpZC5wb3BfYmFjaygpOw0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0Kdm9pZCBfc29sdmUoKXsNCiAgICBpbnQgbSxpLGo7DQogICAgc2NhbmYoIiVkJWQlZCIsJm4sJlEsJm0pOw0KICAgIGZvcihpPTE7aTw9bTtpKyspew0KICAgICAgIGludCB0LHgseTsNCiAgICAgICBzY2FuZigiJWQlZCVkIiwmdCwmeCwmeSk7DQogICAgICAgdmVjW3hdLnB1c2hfYmFjayh7eSx0fSk7DQogICAgICAgdmVjW3ldLnB1c2hfYmFjayh7eCx0fSk7DQogICAgfQ0KDQogICAgZm9yKGk9MTtpPD1uO2krKyl7DQogICAgICAgaWYoIWNvW2ldKXsNCiAgICAgICAgICAgY250WzFdPWNudFsyXT0wOw0KICAgICAgICAgICBkZnMoaSwxKTsNCiAgICAgICAgICAgc3oucHVzaF9iYWNrKFAoY250WzFdLGNudFsyXSxzei5zaXplKCkpKTsNCiAgICAgICAgICAgbm93Kys7DQogICAgICAgfQ0KICAgIH0NCiAgICBpZihmbGFnKXsNCiAgICAgICAgcHJpbnRmKCJOT1xuIik7DQogICAgICAgIHJldHVybiA7DQogICAgfQ0KICAgIHNvcnQoc3ouYmVnaW4oKSxzei5lbmQoKSk7DQogICAgaWYoIXNvbHZlKDAsMCkpIHByaW50ZigiTk9cbiIpOw0KDQoNCn0NCg0KaW50IG1haW4oKXsNCiAgICAvL2lvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsNCg0KICAgIC8vaW50IFQ7c2NhbmYoIiVkIiwmVCk7d2hpbGUoVC0tKQ0KICAgIF9zb2x2ZSgpOw0KfQ0K"}]