[{"id":"3021","submission_id":"3021","filename":"c.cpp","source":"I2luY2x1ZGUgPGlvc3RyZWFtPg0KI2luY2x1ZGUgPGFsZ29yaXRobT4NCiNpbmNsdWRlIDxtYXA+DQp1c2luZyBuYW1lc3BhY2Ugc3RkOw0KY29uc3QgaW50IE4gPSAyZTUgKyAxMCwgTSA9IDVlNSArIDEwLCBpbmYgPSAweDNmM2YzZjNmOw0Kc3RydWN0IG5vZGV0IHsNCiAgICBpbnQgdGltZTsNCiAgICBpbnQga2luZDsgLy8gMSA6IGJ1cywgMiA6cGVvcGxlDQogICAgaW50IGwsIHI7IC8vIGJ1cw0KICAgIGludCBwb3M7IC8vIHBlb3BsZQ0KICAgIGludCBpZHg7IC8vIHFyeQ0KICAgIGJvb2wgb3BlcmF0b3I8KGNvbnN0IG5vZGV0ICZvKSB7DQogICAgICAgIGlmICh0aW1lID09IG8udGltZSkgew0KICAgICAgICAgICAgaWYgKGtpbmQgIT0gby5raW5kKSByZXR1cm4ga2luZCA8IG8ua2luZDsNCiAgICAgICAgICAgIHJldHVybiAociA+IG8ucik7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRpbWUgPiBvLnRpbWU7DQogICAgfQ0KfXFyeXNbTl07DQojZGVmaW5lIGxzIHUgPDwgMQ0KI2RlZmluZSBycyB1IDw8IDEgfDENCiNkZWZpbmUgbHNvbiB0cltsc10NCiNkZWZpbmUgcnNvbiB0cltyc10NCnN0cnVjdCBub2RlIHsNCiAgICBpbnQgZmxhZzsNCiAgICBpbnQgbW47DQp9dHJbTiA8PCAyXTsNCnZvaWQgYnVpbGQoaW50IHUsIGludCBsLCBpbnQgcikgew0KICAgIHRyW3VdLm1uID0gaW5mOw0KICAgIGlmIChsID09IHIpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpbnQgbWlkID0gKGwgKyByKSA+PiAxOw0KICAgIGJ1aWxkKGxzLCBsLCBtaWQpOw0KICAgIGJ1aWxkKHJzLCBtaWQgKyAxLCByKTsNCn0NCg0Kdm9pZCBwdXNodXAoaW50IHUpIHsNCiAgICB0clt1XS5tbiA9IG1pbihyc29uLm1uLCBsc29uLm1uKTsNCn0NCnZvaWQgcHVzaGRvd24oaW50IHUpIHsNCiAgICBpZiAodHJbdV0uZmxhZykgew0KICAgICAgICBsc29uLm1uID0gbWluKHRyW3VdLmZsYWcsIGxzb24ubW4pOw0KICAgICAgICByc29uLm1uID0gbWluKHRyW3VdLmZsYWcsIHJzb24ubW4pOw0KICAgICAgICBsc29uLmZsYWcgPSB0clt1XS5mbGFnOw0KICAgICAgICByc29uLmZsYWcgPSB0clt1XS5mbGFnOw0KICAgICAgICB0clt1XS5mbGFnID0gMDsNCiAgICB9DQp9DQppbnQgcXJ5KGludCB1LCBpbnQgbCwgaW50IHIsIGludCBMLCBpbnQgUikgew0KICAgIGlmIChsIDw9IEwgJiYgUiA8PSByKSB7DQogICAgICAgIHJldHVybiB0clt1XS5tbjsNCiAgICB9DQogICAgcHVzaGRvd24odSk7DQogICAgaW50IG1pZCA9IChMICsgUikgPj4gMTsNCiAgICBpbnQgbW4gPSBpbmY7DQogICAgaWYgKGwgPD0gbWlkKSBtbiA9IG1pbihtbiwgcXJ5KGxzLCBsLCByLCBMLCBtaWQpKTsNCiAgICBpZiAociA+IG1pZCkgbW4gPSBtaW4obW4sIHFyeShycywgbCwgciwgbWlkICsxLCBSKSk7DQogICAgcHVzaHVwKHUpOw0KICAgIHJldHVybiBtbjsNCn0NCnZvaWQgbW9kaWZ5KGludCB1LCBpbnQgbCwgaW50IHIsIGludCBMLCBpbnQgUiwgaW50IHgpIHsNCiAgICBpZiAobCA8PSBMICYmIFIgPD0gcikgew0KICAgICAgICB0clt1XS5tbiA9IG1pbih4LCB0clt1XS5tbik7DQogICAgICAgIHRyW3VdLmZsYWcgPSB4Ow0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIHB1c2hkb3duKHUpOw0KICAgIGludCBtaWQgPSAoTCArIFIpID4+IDE7DQogICAgaWYgKGwgPD0gbWlkKSBtb2RpZnkobHMsIGwsIHIsIEwsIG1pZCwgeCk7DQogICAgaWYgKHIgPm1pZCkgbW9kaWZ5KHJzLCBsLCByLCBtaWQgKyAxLCBSLCB4KTsNCiAgICBwdXNodXAodSk7DQp9DQppbnQgcmVzW05dOw0KaW50IG1haW4oKXsNCiAgICBpbnQgbiwgbSwgeDsNCiAgICBjaW4gPj4gbiA+PiBtID4+eDsNCiAgICBtYXA8aW50LCBpbnQ+IGhhc2hfOw0KICAgIGludCBoYXNoaWR4ID0gMDsNCiAgICBmb3IgKGludCBpID0gMTsgaSA8PSBuOyBpKyspIHsNCiAgICAgICAgY2luID4+IHFyeXNbaV0udGltZSA+PnFyeXNbaV0ubCA+PiBxcnlzW2ldLnI7DQogICAgICAgIHFyeXNbaV0ua2luZCA9IDE7DQogICAgICAgIGhhc2hfW3FyeXNbaV0ubF07DQogICAgICAgIGhhc2hfW3FyeXNbaV0ucl07DQogICAgfQ0KICAgIGhhc2hfW3hdOw0KICAgIGZvciAoaW50IGkgPW4gKyAxOyBpIDw9IG4gKyBtOyBpKyspIHsNCiAgICAgICAgY2luID4+IHFyeXNbaV0udGltZSA+PnFyeXNbaV0ucG9zOw0KICAgICAgICBxcnlzW2ldLmtpbmQgPSAyOw0KICAgICAgICBxcnlzW2ldLmlkeCA9IGkgLSBuOw0KICAgICAgICBoYXNoX1txcnlzW2ldLnBvc107DQogICAgfQ0KICAgIGZvciAoYXV0byAmW18sIHldIDogaGFzaF8pIHsNCiAgICAgICAgeSA9ICsraGFzaGlkeDsNCiAgICB9DQogICAgY291dCA8PCAnXG4nOw0KICAgIGJ1aWxkKDEsIDEsIGhhc2hpZHgpOw0KICAgIG1vZGlmeSgxLCBoYXNoX1t4XSwgaGFzaF9beF0sIDEsIGhhc2hpZHgsIDApOw0KICAgIC8vIGZvciAoaW50IGkgPSAxOyBpIDw9IGhhc2hpZHg7IGkrKykgew0KICAgIC8vICAgICAgICAgICAgIGNvdXQgPDwgcXJ5KDEsIGksIGksIDEsIGhhc2hpZHgpIDw8ICcgJzsNCiAgICAvLyAgICAgICAgIH0NCiAgICAvLyAgICAgICAgIGNvdXQgPDwgJ1xuJzsNCiAgICBzb3J0KHFyeXMgKzEsIHFyeXMgK24gKyBtICsxKTsNCiAgICBmb3IgKGludCBpID0gMTsgaSA8PSBuICsgbTsgaSsrKSB7DQogICAgICAgIGlmIChxcnlzW2ldLmtpbmQgPT0gMSkgew0KICAgICAgICAgICAgaW50IGwgPSBoYXNoX1txcnlzW2ldLmxdLCByID0gaGFzaF9bcXJ5c1tpXS5yXTsNCiAgICAgICAgICAgIGludCBtbiA9IHFyeSgxLCBsLCByLCAxLCBoYXNoaWR4KTsNCiAgICAgICAgICAgIG1vZGlmeSgxLCBsLCByLCAxLCBoYXNoaWR4LCBtbiArIDEpOw0KICAgICAgICAgICAgLy8gZm9yIChpbnQgaSA9IDE7IGkgPD0gaGFzaGlkeDsgaSsrKSB7DQogICAgICAgICAgICAvLyAgICAgY291dCA8PCBxcnkoMSwgaSwgaSwgMSwgaGFzaGlkeCkgPDwgJyAnOw0KICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgLy8gY291dCA8PCAnXG4nOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaW50IHBvcyA9IGhhc2hfW3FyeXNbaV0ucG9zXTsNCiAgICAgICAgICAgIGludCBvayA9IHFyeSgxLCBwb3MsIHBvcywgMSwgaGFzaGlkeCk7DQogICAgICAgICAgICBpZiAob2sgPT0gaW5mKSB7DQogICAgICAgICAgICAgICAgb2sgPSAtMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlc1txcnlzW2ldLmlkeF0gPSBvazsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmb3IgKGludCBpID0gMTsgaSA8PSBtOyBpKyspIHsNCiAgICAgICAgY291dCA8PCByZXNbaV0gPDwnXG4nOw0KICAgIH0NCn0NCg=="}]