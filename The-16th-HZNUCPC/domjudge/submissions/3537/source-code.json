[{"id":"3537","submission_id":"3537","filename":"C.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+DQp1c2luZyBuYW1lc3BhY2Ugc3RkOw0KdHlwZWRlZiBsb25nIGxvbmcgbGw7DQpjb25zdGV4cHIgbGwgbW9kID0gMWU5ICsgNzsNCnN0cnVjdCBtb2RpbnQNCnsNCiAgICBpbnQgbjsNCiAgICBtb2RpbnQoKSA6IG4oMCkgeyA7IH0NCiAgICBtb2RpbnQobGwgbSkNCiAgICB7DQogICAgICAgIGlmIChtIDwgMCB8fCBtb2QgPD0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgbSAlPSBtb2Q7DQogICAgICAgICAgICBpZiAobSA8PSAwKQ0KICAgICAgICAgICAgICAgIG0gKz0gbW9kOw0KICAgICAgICB9DQogICAgICAgIG4gPSBtOw0KICAgIH0NCiAgICBvcGVyYXRvciBpbnQoKSB7IHJldHVybiBuOyB9DQp9Ow0KYm9vbCBvcGVyYXRvcj09KG1vZGludCBhLCBtb2RpbnQgYikNCnsNCiAgICByZXR1cm4gYS5uID09IGIubjsNCn0NCmJvb2wgb3BlcmF0b3I8KG1vZGludCBhLCBtb2RpbnQgYikNCnsNCiAgICByZXR1cm4gYS5uIDwgYi5uOw0KfQ0KbW9kaW50IG9wZXJhdG9yKz0obW9kaW50ICZhLCBtb2RpbnQgYikNCnsNCiAgICBhLm4gKz0gYi5uOw0KICAgIGlmIChhLm4gPj0gbW9kKQ0KICAgICAgICBhLm4gLT0gbW9kOw0KICAgIHJldHVybiBhOw0KfQ0KbW9kaW50IG9wZXJhdG9yLT0obW9kaW50ICZhLCBtb2RpbnQgYikNCnsNCiAgICBhLm4gLT0gYi5uOw0KICAgIGlmIChhLm4gPCAwKQ0KICAgICAgICBhLm4gKz0gbW9kOw0KICAgIHJldHVybiBhOw0KfQ0KbW9kaW50IG9wZXJhdG9yKj0obW9kaW50ICZhLCBtb2RpbnQgYikNCnsNCiAgICBhLm4gPSAoKGxsKWEubiAqIGIubikgJSBtb2Q7DQogICAgcmV0dXJuIGE7DQp9DQpsbCBpbnYobGwgYSwgbGwgcCkgeyByZXR1cm4gKGEgPT0gMSA/IDEgOiAoMSAtIHAgKiBpbnYocCAlIGEsIGEpKSAvIGEgKyBwKTsgfQ0KbW9kaW50IG9wZXJhdG9yLyhtb2RpbnQgYSwgbW9kaW50IGIpDQp7DQogICAgcmV0dXJuIGEgKiBtb2RpbnQoaW52KGIsIG1vZCkpOw0KfQ0KbW9kaW50IG9wZXJhdG9yKihtb2RpbnQgYSwgbW9kaW50IGIpIHsgcmV0dXJuIGEgKj0gYjsgfQ0KY29uc3QgaW50IG1heF9uID0gMSA8PCAyMDsNCm1vZGludCBmYWN0W21heF9uXSwgZmFjdGludlttYXhfbl07DQoNCm1vZGludCBjb21iKGludCBhLCBpbnQgYikNCnsNCiAgICBpZiAoYSA8IDAgfHwgYiA8IDAgfHwgYSA8IGIpDQogICAgICAgIHJldHVybiAwOw0KICAgIGVsc2UNCiAgICAgICAgcmV0dXJuIGZhY3RbYV0gKiBmYWN0aW52W2JdICogZmFjdGludlthIC0gYl07DQp9DQoNCmNoYXIgX2FbMjAwMDAxXSwgX2JbMjAwMDAxXTsNCmNoYXIgKmEgPSBfYSwgKmIgPSBfYjsNCmludCBfY291bnRhWzI2XSwgX2NvdW50YlsyNl07DQppbnQgbWFwcFsyNl1bMjZdOw0KaW50ICpjb3VudGEgPSBfY291bnRhLCAqY291bnRiID0gX2NvdW50YjsNCmludCByY250YSwgcmNudGI7DQppbnQgbWFpbigpDQp7DQogICAgLy9pbml0X2YoKQ0KICAgIGZhY3RbMF0gPSBtb2RpbnQoMSk7DQogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtYXhfbiAtIDE7IGkrKykNCiAgICB7DQogICAgICAgIGZhY3RbaSArIDFdID0gZmFjdFtpXSAqIG1vZGludChpICsgMSk7DQogICAgfQ0KICAgIGZhY3RpbnZbbWF4X24gLSAxXSA9IG1vZGludCgxKSAvIGZhY3RbbWF4X24gLSAxXTsNCiAgICBmb3IgKGludCBpID0gbWF4X24gLSAyOyBpID49IDA7IGktLSkNCiAgICB7DQogICAgICAgIGZhY3RpbnZbaV0gPSBmYWN0aW52W2kgKyAxXSAqIG1vZGludChpICsgMSk7DQogICAgfQ0KDQogICAgLy9tYWluKCkNCiAgICBzY2FuZigiJXMlcyIsIGEsIGIpOw0KICAgIGZvciAoaW50IGkgPSAwOyBhW2ldOyBpKyspDQogICAgew0KICAgICAgICBpZiAoIShjb3VudGFbYVtpXSAtICdhJ10rKykpDQogICAgICAgICAgICByY250YSsrOw0KICAgICAgICBpZiAoIShjb3VudGJbYltpXSAtICdhJ10rKykpDQogICAgICAgICAgICByY250YisrOw0KICAgICAgICBtYXBwW2FbaV0gLSAnYSddW2JbaV0gLSAnYSddKys7DQogICAgfQ0KICAgIG1vZGludCBhbnMgPSBtb2RpbnQoMCk7DQogICAgZm9yIChpbnQgY2ExID0gMDsgY2ExIDwgMjY7IGNhMSsrKQ0KICAgIHsNCiAgICAgICAgZm9yIChpbnQgY2EyID0gMDsgY2EyIDw9IGNhMTsgY2EyKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvciAoaW50IGNiMSA9IDA7IGNiMSA8IDI2OyBjYjErKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBjYjIgPSAwOyBjYjIgPCAyNjsgY2IyKyspDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY2ExID09IGNhMiAmJiBjYjIgPiBjYjEpDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhMSArICdhJyA9PSAnYicgJiYgY2EyICsgJ2EnID09ICdhJyAmJiBjYjEgKyAnYScgPT0gJ2EnICYmIGNiMiArICdhJyA9PSAnYycpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vcHV0Y2hhcignXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRhW2NhMV0gPT0gMCB8fCBjb3VudGFbY2EyXSA9PSAwIHx8IGNvdW50YltjYjFdID09IDAgfHwgY291bnRiW2NiMl0gPT0gMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRhW2NhMV0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250YS0tOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRhW2NhMl0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250YS0tOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRhW2NiMV0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YSsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRhW2NiMl0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YSsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRiW2NiMV0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250Yi0tOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRiW2NiMl0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250Yi0tOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRiW2NhMV0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YisrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRiW2NhMl0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YisrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRhW2NhMV0gPj0gMCAmJiBjb3VudGFbY2EyXSA+PSAwICYmIGNvdW50YltjYjFdID49IDAgJiYgY291bnRiW2NiMl0gPj0gMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyY250YiA9PSByY250YSAmJiByY250YiA+IDApDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9wcmludGYoImMxOiVjPC0+JWMoJWQpOyVjPC0+JWMoJWQpO1xuIiwgY2ExICsgJ2EnLCBjYjEgKyAnYScsIG1hcHBbY2ExXVtjYjFdLCBjYTIgKyAnYScsIGNiMiArICdhJywgbWFwcFtjYTJdW2NiMl0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNiMSA9PSBjYjIgJiYgY2ExID09IGNhMikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zICs9IGNvbWIobWFwcFtjYTFdW2NiMV0sIDIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zICs9IChtYXBwW2NhMV1bY2IxXSkgKiAobWFwcFtjYTJdW2NiMl0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcHJpbnRmKCJhbnMgPT4lZFxuIiwgYW5zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRhW2NhMV0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YSsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRhW2NhMl0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YSsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRhW2NiMV0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250YS0tOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRhW2NiMl0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250YS0tOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRiW2NiMV0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YisrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKCsrY291bnRiW2NiMl0pID09IDEpDQogICAgICAgICAgICAgICAgICAgICAgICByY250YisrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRiW2NhMV0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250Yi0tOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKC0tY291bnRiW2NhMl0pID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICByY250Yi0tOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBwcmludGYoIiVsbGQiLCBhbnMpOw0KDQogICAgcmV0dXJuIDA7DQp9"}]