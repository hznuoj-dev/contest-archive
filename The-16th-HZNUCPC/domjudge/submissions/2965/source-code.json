[{"id":"2965","submission_id":"2965","filename":"c.cpp","source":"I2luY2x1ZGUgPGlvc3RyZWFtPg0KI2luY2x1ZGUgPGFsZ29yaXRobT4NCiNpbmNsdWRlIDxtYXA+DQp1c2luZyBuYW1lc3BhY2Ugc3RkOw0KY29uc3QgaW50IE4gPSAzZTUgKyAxMCwgaW5mID0gMHgzZjNmM2YzZjsNCnN0cnVjdCBub2RldCB7DQogICAgaW50IHRpbWU7DQogICAgaW50IGtpbmQ7IC8vIDEgOiBidXMsIDIgOnBlb3BsZQ0KICAgIGludCBsLCByOyAvLyBidXMNCiAgICBpbnQgcG9zOyAvLyBwZW9wbGUNCiAgICBpbnQgaWR4OyAvLyBxcnkNCiAgICBib29sIG9wZXJhdG9yPChjb25zdCBub2RldCAmbykgew0KICAgICAgICBpZiAodGltZSA9PSBvLnRpbWUpIHsNCiAgICAgICAgICAgIGlmIChraW5kICE9IG8ua2luZCkgcmV0dXJuIGtpbmQgPCBvLmtpbmQ7DQogICAgICAgICAgICByZXR1cm4gKHIgPiBvLnIpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0aW1lID4gby50aW1lOw0KICAgIH0NCn1xcnlzW05dOw0KI2RlZmluZSBscyB1IDw8IDENCiNkZWZpbmUgcnMgdSA8PCAxIHwxDQojZGVmaW5lIGxzb24gdHJbbHNdDQojZGVmaW5lIHJzb24gdHJbcnNdDQpzdHJ1Y3Qgbm9kZSB7DQogICAgaW50IGZsYWc7DQogICAgaW50IG1uOw0KfXRyW04gPDwgMl07DQp2b2lkIGJ1aWxkKGludCB1LCBpbnQgbCwgaW50IHIpIHsNCiAgICB0clt1XS5tbiA9IGluZjsNCiAgICBpZiAobCA9PSByKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgaW50IG1pZCA9IChsICsgcikgPj4gMTsNCiAgICBidWlsZChscywgbCwgbWlkKTsNCiAgICBidWlsZChycywgbWlkICsgMSwgcik7DQp9DQoNCnZvaWQgcHVzaHVwKGludCB1KSB7DQogICAgdHJbdV0ubW4gPSBtaW4ocnNvbi5tbiwgbHNvbi5tbik7DQp9DQp2b2lkIHB1c2hkb3duKGludCB1KSB7DQogICAgaWYgKHRyW3VdLmZsYWcpIHsNCiAgICAgICAgbHNvbi5tbiA9IG1pbih0clt1XS5mbGFnLCBsc29uLm1uKTsNCiAgICAgICAgcnNvbi5tbiA9IG1pbih0clt1XS5mbGFnLCByc29uLm1uKTsNCiAgICAgICAgbHNvbi5mbGFnID0gdHJbdV0uZmxhZzsNCiAgICAgICAgcnNvbi5mbGFnID0gdHJbdV0uZmxhZzsNCiAgICAgICAgdHJbdV0uZmxhZyA9IDA7DQogICAgfQ0KfQ0KaW50IHFyeShpbnQgdSwgaW50IGwsIGludCByLCBpbnQgTCwgaW50IFIpIHsNCiAgICBpZiAobCA8PSBMICYmIFIgPD0gcikgew0KICAgICAgICByZXR1cm4gdHJbdV0ubW47DQogICAgfQ0KICAgIHB1c2hkb3duKHUpOw0KICAgIGludCBtaWQgPSAoTCArIFIpID4+IDE7DQogICAgaW50IG1uID0gaW5mOw0KICAgIGlmIChsIDw9IG1pZCkgbW4gPSBtaW4obW4sIHFyeShscywgbCwgciwgTCwgbWlkKSk7DQogICAgaWYgKHIgPiBtaWQpIG1uID0gbWluKG1uLCBxcnkocnMsIGwsIHIsIG1pZCArMSwgUikpOw0KICAgIHJldHVybiBtbjsNCn0NCnZvaWQgbW9kaWZ5KGludCB1LCBpbnQgbCwgaW50IHIsIGludCBMLCBpbnQgUiwgaW50IHgpIHsNCiAgICBpZiAobCA8PSBMICYmIFIgPD0gcikgew0KICAgICAgICB0clt1XS5tbiA9IG1pbih4LCB0clt1XS5tbik7DQogICAgICAgIHRyW3VdLmZsYWcgPSB4Ow0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIHB1c2hkb3duKHUpOw0KICAgIGludCBtaWQgPSAoTCArIFIpID4+IDE7DQogICAgaWYgKGwgPD0gbWlkKSBtb2RpZnkobHMsIGwsIHIsIEwsIG1pZCwgeCk7DQogICAgaWYgKHIgPm1pZCkgbW9kaWZ5KHJzLCBsLCByLCBtaWQgKyAxLCBSLCB4KTsNCiAgICBwdXNodXAodSk7DQp9DQppbnQgcmVzW05dOw0KaW50IG1haW4oKXsNCiAgICBpbnQgbiwgbSwgeDsNCiAgICBjaW4gPj4gbiA+Pm0gPj54Ow0KICAgIG1hcDxpbnQsIGludD4gaGFzaF87DQogICAgaW50IGhhc2hpZHggPSAwOw0KICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG47IGkrKykgew0KICAgICAgICBjaW4gPj4gcXJ5c1tpXS50aW1lID4+cXJ5c1tpXS5sID4+IHFyeXNbaV0ucjsNCiAgICAgICAgcXJ5c1tpXS5raW5kID0gMTsNCiAgICAgICAgaGFzaF9bcXJ5c1tpXS5sXTsNCiAgICAgICAgaGFzaF9bcXJ5c1tpXS5yXTsNCiAgICB9DQogICAgaGFzaF9beF07DQogICAgZm9yIChpbnQgaSA9biArIDE7IGkgPD0gbiArIG07IGkrKykgew0KICAgICAgICBjaW4gPj4gcXJ5c1tpXS50aW1lID4+cXJ5c1tpXS5wb3M7DQogICAgICAgIHFyeXNbaV0ua2luZCA9IDI7DQogICAgICAgIHFyeXNbaV0uaWR4ID0gaSAtIG47DQogICAgICAgIGhhc2hfW3FyeXNbaV0ucG9zXTsNCiAgICB9DQogICAgZm9yIChhdXRvICZbXywgeV0gOiBoYXNoXykgew0KICAgICAgICB5ID0gKytoYXNoaWR4Ow0KICAgICAgICBjb3V0IDw8IF8gPDwgJyAnOw0KICAgIH0NCiAgICBjb3V0IDw8ICdcbic7DQogICAgYnVpbGQoMSwgMSwgaGFzaGlkeCk7DQogICAgbW9kaWZ5KDEsIGhhc2hfW3hdLCBoYXNoX1t4XSwgMSwgaGFzaGlkeCwgMCk7DQogICAgLy8gZm9yIChpbnQgaSA9IDE7IGkgPD0gaGFzaGlkeDsgaSsrKSB7DQogICAgLy8gICAgICAgICAgICAgY291dCA8PCBxcnkoMSwgaSwgaSwgMSwgaGFzaGlkeCkgPDwgJyAnOw0KICAgIC8vICAgICAgICAgfQ0KICAgIC8vICAgICAgICAgY291dCA8PCAnXG4nOw0KICAgIHNvcnQocXJ5cyArMSwgcXJ5cyArbiArIG0gKzEpOw0KICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG4gKyBtOyBpKyspIHsNCiAgICAgICAgaWYgKHFyeXNbaV0ua2luZCA9PSAxKSB7DQogICAgICAgICAgICBpbnQgbCA9IGhhc2hfW3FyeXNbaV0ubF0sIHIgPSBoYXNoX1txcnlzW2ldLnJdOw0KICAgICAgICAgICAgaW50IG1uID0gcXJ5KDEsIGwsIHIsIDEsIGhhc2hpZHgpOw0KICAgICAgICAgICAgbW9kaWZ5KDEsIGwsIHIsIDEsIGhhc2hpZHgsIG1uICsgMSk7DQogICAgICAgICAgICAvLyBmb3IgKGludCBpID0gMTsgaSA8PSBoYXNoaWR4OyBpKyspIHsNCiAgICAgICAgICAgIC8vICAgICBjb3V0IDw8IHFyeSgxLCBpLCBpLCAxLCBoYXNoaWR4KSA8PCAnICc7DQogICAgICAgICAgICAvLyB9DQogICAgICAgICAgICAvLyBjb3V0IDw8ICdcbic7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpbnQgcG9zID0gaGFzaF9bcXJ5c1tpXS5wb3NdOw0KICAgICAgICAgICAgaW50IG9rID0gcXJ5KDEsIHBvcywgcG9zLCAxLCBoYXNoaWR4KTsNCiAgICAgICAgICAgIGlmIChvayA9PSBpbmYpIHsNCiAgICAgICAgICAgICAgICBvayA9IC0xOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVzW3FyeXNbaV0uaWR4XSA9IG9rOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG07IGkrKykgew0KICAgICAgICBjb3V0IDw8IHJlc1tpXSA8PCdcbic7DQogICAgfQ0KfQ0K"}]