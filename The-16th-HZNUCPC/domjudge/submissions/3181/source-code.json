[{"id":"3181","submission_id":"3181","filename":"4.cpp","source":"I2luY2x1ZGU8Yml0cy9zdGRjKysuaD4NCnVzaW5nIG5hbWVzcGFjZSBzdGQ7DQp0eXBlZGVmIGxvbmcgbG9uZyBsbDsNCmNvbnN0IGludCBOPTFlNisxMDsNCmNvbnN0IGludCBtYXhuPTEwOw0Kc3RydWN0IG5vZGUNCnsNCiAgICBpbnQgdix0Ow0KfTsNCnZlY3RvcjxzdHJ1Y3Qgbm9kZT52ZWNbTl07DQoNCmludCBjb1tOXTsNCmludCBjbnRbM10sUSxuOw0KYm9vbCBmbGFnPTA7DQoNCnN0cnVjdCBQew0KICAgIGludCBhLGIsdDsNCiAgICBQKGludCBhPTAsaW50IGI9MCxpbnQgdD0wKTphKGEpLGIoYiksdCh0KSB7fQ0KICAgIGJvb2wgb3BlcmF0b3IgPChjb25zdCBQJiByaHMpY29uc3R7DQogICAgICAgIHJldHVybiBhPnJocy5hOw0KICAgIH0NCn07DQoNCnZlY3RvcjxQPnN6Ow0KdmVjdG9yPGludD5wZW9wbGVbTl1bM107DQppbnQgbm93PTA7DQp2ZWN0b3I8cGFpcjxpbnQsaW50PiA+aWQ7DQoNCnZvaWQgZGZzKGludCBpLGludCBjKQ0Kew0KICAgIGlmKGZsYWcpcmV0dXJuOw0KICAgIGNvW2ldPWM7DQogICAgY250W2NdKys7DQogICAgcGVvcGxlW25vd11bY10ucHVzaF9iYWNrKGkpOw0KICAgIGZvcihhdXRvIGo6dmVjW2ldKQ0KICAgIHsNCiAgICAgICAgaWYoZmxhZylyZXR1cm47DQogICAgICAgIGlmKCFjb1tqLnZdKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZihqLnQ9PTApZGZzKGoudixjKTsNCiAgICAgICAgICAgIGVsc2UgZGZzKGoudiwzLWMpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYoai50PT0wJiZjb1tqLnZdIT1jKXtmbGFnPTE7cmV0dXJuO30NCiAgICAgICAgICAgIGVsc2UgaWYoai50PT0xJiZjb1tqLnZdPT1jKXtmbGFnPTE7cmV0dXJuO30NCiAgICAgICAgfQ0KICAgIH0NCn0NCnZlY3RvcjxpbnQ+YW5zOw0KDQpib29sIHNvbHZlKGludCBkZXAsaW50IHN1bSl7DQogICAgaWYoc3VtPlEpIHJldHVybiBmYWxzZTsNCiAgICBpZihkZXA9PXN6LnNpemUoKSl7DQogICAgICAgIGlmKHN1bT09USl7DQogICAgICAgICAgICBwcmludGYoIllFU1xuIik7DQogICAgICAgICAgICBmb3IoYXV0byBwOmlkKXsNCiAgICAgICAgICAgICAgICBpZihwLmZpcnN0PT0xKXsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGF1dG8gcTpwZW9wbGVbcC5zZWNvbmRdWzJdKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFucy5wdXNoX2JhY2socSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGF1dG8gcTpwZW9wbGVbcC5zZWNvbmRdWzFdKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFucy5wdXNoX2JhY2socSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzb3J0KGFucy5iZWdpbigpLGFucy5lbmQoKSk7DQogICAgICAgICAgICBmb3IoYXV0byBwOmFucykgY291dDw8cDw8IiAiOw0KICAgICAgICAgICAgY291dDw8IlxuIjsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgICBpZC5wdXNoX2JhY2soezAsc3pbZGVwXS50fSk7DQogICAgaWYoc29sdmUoZGVwKzEsc3VtK3N6W2RlcF0uYSkpew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogICAgaWQucG9wX2JhY2soKTsNCiAgICBpZC5wdXNoX2JhY2soezEsc3pbZGVwXS50fSk7DQogICAgaWYoc29sdmUoZGVwKzEsc3VtK3N6W2RlcF0uYikpew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogICAgaWQucG9wX2JhY2soKTsNCiAgICByZXR1cm4gZmFsc2U7DQp9DQoNCnZvaWQgX3NvbHZlKCl7DQogICBpbnQgbSxpLGo7DQogICBzY2FuZigiJWQlZCVkIiwmbiwmUSwmbSk7DQogICBmb3IoaT0xO2k8PW07aSsrKQ0KICAgew0KICAgICAgIGludCB0LHgseTsNCiAgICAgICBzY2FuZigiJWQlZCVkIiwmdCwmeCwmeSk7DQogICAgICAgdmVjW3hdLnB1c2hfYmFjayh7eSx0fSk7DQogICAgICAgdmVjW3ldLnB1c2hfYmFjayh7eCx0fSk7DQogICB9DQoNCiAgIGZvcihpPTE7aTw9bjtpKyspDQogICB7DQogICAgICAgaWYoIWNvW2ldKQ0KICAgICAgIHsNCiAgICAgICAgICAgY250WzFdPWNudFsyXT0wOw0KICAgICAgICAgICBkZnMoaSwxKTsNCiAgICAgICAgICAgc3oucHVzaF9iYWNrKFAoY250WzFdLGNudFsyXSxzei5zaXplKCkpKTsNCiAgICAgICAgICAgbm93Kys7DQogICAgICAgfQ0KICAgfQ0KICAgaWYoZmxhZyl7DQogICAgcHJpbnRmKCJOT1xuIik7DQogICAgcmV0dXJuIDsNCiAgIH0NCiAgICBzb3J0KHN6LmJlZ2luKCksc3ouZW5kKCkpOw0KICAgIGlmKCFzb2x2ZSgwLDApKSBwcmludGYoIk5PXG4iKTsNCg0KDQp9DQoNCmludCBtYWluKCl7DQogICAgLy9pb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7DQoNCiAgICAvL2ludCBUO3NjYW5mKCIlZCIsJlQpO3doaWxlKFQtLSkNCiAgICBfc29sdmUoKTsNCn0NCg=="}]