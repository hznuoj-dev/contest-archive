[{"id":"3412","submission_id":"3412","filename":"B.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+DQoNCnVzaW5nIG5hbWVzcGFjZSBzdGQ7DQoNCmNvbnN0IGludCBOID0gNGU1ICsgNTsNCmNvbnN0IGRvdWJsZSBlcHMgPSAxZS04Ow0KDQppbnQgc2duKGRvdWJsZSB4KSB7DQoJaWYgKGZhYnMoeCkgPCBlcHMpIHsNCgkJcmV0dXJuIDA7DQoJfSBlbHNlIGlmICh4ID4gMCkgew0KCQlyZXR1cm4gMTsNCgl9IGVsc2Ugew0KCQlyZXR1cm4gLTE7DQoJfQ0KfQ0KDQpzdHJ1Y3QgUG9pbnQgew0KCWRvdWJsZSB4LCB5Ow0KCQ0KCVBvaW50KCkgeyB4ID0geSA9IDA7IH0NCglQb2ludChkb3VibGUgX3gsIGRvdWJsZSBfeSk6IHgoX3gpLCB5KF95KSB7IH0NCglQb2ludCBvcGVyYXRvcisoY29uc3QgUG9pbnQmIGIpIHsNCgkJcmV0dXJuIFBvaW50KHggKyBiLngsIHkgKyBiLnkpOw0KCX0NCglQb2ludCBvcGVyYXRvci0oY29uc3QgUG9pbnQmIGIpIHsNCgkJcmV0dXJuIFBvaW50KHggLSBiLngsIHkgLSBiLnkpOw0KCX0NCglkb3VibGUgb3BlcmF0b3IqKGNvbnN0IFBvaW50JiBiKSB7DQoJCXJldHVybiB4ICogYi54ICsgeSAqIGIueTsNCgl9DQoJZG91YmxlIG9wZXJhdG9yXihjb25zdCBQb2ludCYgYikgew0KCQlyZXR1cm4geCAqIGIueSAtIHkgKiBiLng7DQoJfQ0KCQ0KCWNvbnN0IGRvdWJsZSBkaXN0KCkgew0KCQlyZXR1cm4gc3FydCh4ICogeCArIHkgKiB5KTsNCgl9DQp9Ow0KDQp1c2luZyBWZWN0b3IgPSBQb2ludDsNCg0KYm9vbCBjbXAoUG9pbnQgYSwgUG9pbnQgYikgew0KCWlmIChzZ24oYS54IC0gYi54KSkgew0KCQlyZXR1cm4gYS54IDwgYi54Ow0KCX0NCglyZXR1cm4gYS55IDwgYi55Ow0KfQ0KDQoNClBvaW50IHN0a1tOXTsNCmludCB0b3A7DQoNCnZlY3RvcjxQb2ludD4gZ2V0KHZlY3RvcjxQb2ludD4gdikgew0KCXNvcnQodi5iZWdpbigpLCB2LmVuZCgpLCBjbXApOw0KCXRvcCA9IDA7DQoJaW50IG4gPSB2LnNpemUoKTsgDQoJZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsNCgkJd2hpbGUgKHRvcCA+IDEgJiYgKChzdGtbdG9wIC0gMV0gLSBzdGtbdG9wIC0gMl0pIF4gKHZbaV0gLSBzdGtbdG9wIC0gMl0pKSA8PSAwKSB7DQoJCQktLXRvcDsNCgkJfQ0KCQlzdGtbdG9wKytdID0gdltpXTsNCgl9DQoJaW50IGsgPSB0b3A7DQoJZm9yIChpbnQgaSA9IG4gLSAyOyBpID49IDA7IGktLSkgew0KCQl3aGlsZSAodG9wID4gayAmJiAoKHN0a1t0b3AgLSAxXSAtIHN0a1t0b3AgLSAyXSkgXiAodltpXSAtIHN0a1t0b3AgLSAyXSkpIDw9IDApIHsNCgkJCXRvcC0tOw0KCQl9DQoJCXN0a1t0b3ArK10gPSB2W2ldOw0KCX0NCgkNCgl2ZWN0b3I8UG9pbnQ+IHJldDsNCglmb3IgKGludCBpID0gMDsgaSA8IHRvcCAtIDE7IGkrKykgew0KCQlyZXQucHVzaF9iYWNrKHN0a1tpXSk7DQoJfQ0KCXJldHVybiByZXQ7DQp9DQoNCmJvb2wgY21wMihwYWlyPFZlY3RvciwgaW50PiBhLCBwYWlyPFZlY3RvciwgaW50PiBiKSB7DQoJcmV0dXJuIGEuZmlyc3QuZGlzdCgpIDwgYi5maXJzdC5kaXN0KCk7DQp9DQoNCmNvbnN0IGRvdWJsZSBQID0gOTgyNDQzNTM7DQoNCmRvdWJsZSBjYWxjKHZlY3RvcjxQb2ludD4gYSkgew0KCWludCBuID0gYS5zaXplKCk7DQoJdmVjdG9yPHBhaXI8VmVjdG9yLCBpbnQ+PiBiKG4pOw0KCWZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7DQoJCWJbaV0gPSB7YVsoaSArIDEpICUgbl0gLSBhW2ldLCBpfTsNCgl9IA0KCWludCBpZCA9IGJbMF0uc2Vjb25kOw0KCXZlY3RvcjxQb2ludD4gZzsNCglmb3IgKGludCBpID0gaWQ7IGkgPCBuOyBpKyspIHsNCgkJZy5wdXNoX2JhY2soYVtpXSk7DQoJfQ0KCWZvciAoaW50IGkgPSAwOyBpIDwgaWQ7IGkrKykgew0KCQlnLnB1c2hfYmFjayhhW2ldKTsNCgl9DQoJZG91YmxlIGsgPSBiWzBdLmZpcnN0LmRpc3QoKTsNCglkb3VibGUgczEgPSAwLCBzMiA9IDA7DQoJZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsNCgkJczEgKz0gYltpXS5maXJzdC5kaXN0KCk7DQoJCXMyICs9IGFbKGkgKyAxKSAlIG5dIF4gYVtpXTsNCgl9DQoJcmV0dXJuIGZhYnMoczIpIC8gczEgLyBzMTsNCn0NCg0KDQppbnQgbiwgbTsNCmludCBhbnNbTl07DQppbnQgdG1wW05dOw0KDQppbnQgbWFpbigpIHsNCgljaW4gPj4gbjsNCgl2ZWN0b3I8cGFpcjxkb3VibGUsIGludD4+IHJlYzsNCglmb3IgKGludCBpID0gMTsgaSA8PSBuOyBpKyspIHsNCgkJY2luID4+IG07DQoJCXZlY3RvcjxQb2ludD4gYShtKTsNCgkJZm9yIChpbnQgaiA9IDA7IGogPCBtOyBqKyspIHsNCgkJCWNpbiA+PiBhW2pdLnggPj4gYVtqXS55Ow0KCQl9DQoJCXZlY3RvcjxQb2ludD4gdCA9IGdldChhKTsNCgkJZG91YmxlIHggPSBjYWxjKHQpOw0KLy8JCWNlcnIgPDwgaSA8PCAiICIgPDwgeCA8PCAiXG4iOw0KCQlyZWMucHVzaF9iYWNrKHt4LCBpfSk7ICAgICAgICANCgl9DQoJc29ydChyZWMuYmVnaW4oKSwgcmVjLmVuZCgpKTsNCglkb3VibGUgc3QgPSByZWNbMF0uZmlyc3Q7DQoJaW50IG0gPSAxOw0KCWZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKSB7DQoJCWlmIChzZ24oc3QgLSByZWNbaV0uZmlyc3QpID09IDApIHsNCgkJCXRtcFsrK21dID0gcmVjW2ldLnNlY29uZDsNCgkJfSBlbHNlIHsNCgkJCXNvcnQodG1wICsgMSwgdG1wICsgMSArIG0pOw0KCQkJZm9yIChpbnQgaiA9IDE7IGogPD0gbTsgaisrKSB7DQoJCQkJYW5zW3RtcFtqXV0gPSBqIC0gMTsNCgkJCX0NCgkJCW0gPSAxOw0KCQkJc3QgPSByZWNbaV0uZmlyc3Q7DQoJCX0NCgl9DQoJaWYgKG0gPiAxKSB7DQoJCXNvcnQodG1wICsgMSwgdG1wICsgMSArIG0pOw0KCQlmb3IgKGludCBqID0gMTsgaiA8PSBtOyBqKyspIHsNCgkJCWFuc1t0bXBbal1dID0gaiAtIDE7DQoJCX0NCgl9DQoJZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgaSsrKSB7DQoJCXByaW50ZigiJWRcbiIsIGFuc1tpXSk7DQoJfQ0KCXJldHVybiAwOw0KfQ=="}]