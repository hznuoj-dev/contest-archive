[{"id":"3378","submission_id":"3378","filename":"4.cpp","source":"I2luY2x1ZGU8Yml0cy9zdGRjKysuaD4NCnVzaW5nIG5hbWVzcGFjZSBzdGQ7DQp0eXBlZGVmIGxvbmcgbG9uZyBsbDsNCmNvbnN0IGludCBOPTFlNisxMDsNCmNvbnN0IGludCBtYXhuPTEwOw0Kc3RydWN0IG5vZGUNCnsNCiAgICBpbnQgdix0Ow0KfTsNCnZlY3RvcjxzdHJ1Y3Qgbm9kZT52ZWNbTl07DQoNCmludCBjb1tOXTsNCmludCBjbnRbM10sUSxuOw0KYm9vbCBmbGFnPTA7DQoNCnN0cnVjdCBQew0KICAgIGludCBhLGIsdDsNCiAgICBQKGludCBhPTAsaW50IGI9MCxpbnQgdD0wKTphKGEpLGIoYiksdCh0KSB7fQ0KICAgIGJvb2wgb3BlcmF0b3IgPChjb25zdCBQJiByaHMpY29uc3R7DQogICAgICAgIHJldHVybiBhPnJocy5hOw0KICAgIH0NCn07DQoNCnZlY3RvcjxQPnN6Ow0KdmVjdG9yPGludD5wZW9wbGVbTl1bM107DQppbnQgbm93PTA7DQp2ZWN0b3I8cGFpcjxpbnQsaW50PiA+aWQ7DQoNCnZvaWQgZGZzKGludCBpLGludCBjKQ0Kew0KICAgIGlmKGZsYWcpcmV0dXJuOw0KICAgIGNvW2ldPWM7DQogICAgY250W2NdKys7DQogICAgcGVvcGxlW25vd11bY10ucHVzaF9iYWNrKGkpOw0KICAgIGZvcihhdXRvIGo6dmVjW2ldKQ0KICAgIHsNCiAgICAgICAgaWYoZmxhZylyZXR1cm47DQogICAgICAgIGlmKCFjb1tqLnZdKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZihqLnQ9PTApZGZzKGoudixjKTsNCiAgICAgICAgICAgIGVsc2UgZGZzKGoudiwzLWMpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYoai50PT0wJiZjb1tqLnZdIT1jKXtmbGFnPTE7cmV0dXJuO30NCiAgICAgICAgICAgIGVsc2UgaWYoai50PT0xJiZjb1tqLnZdPT1jKXtmbGFnPTE7cmV0dXJuO30NCiAgICAgICAgfQ0KICAgIH0NCn0NCnZlY3RvcjxpbnQ+YW5zOw0KDQpib29sIHNvbHZlKGludCBkZXAsaW50IHN1bSl7DQogICAgaWYoc3VtPlEpIHJldHVybiBmYWxzZTsNCiAgICBpZihkZXA9PXN6LnNpemUoKSl7DQogICAgICAgIGlmKHN1bT09USl7DQogICAgICAgICAgICBwcmludGYoIllFU1xuIik7DQogICAgICAgICAgICBmb3IoYXV0byBwOmlkKXsNCiAgICAgICAgICAgICAgICBpZihwLmZpcnN0PT0xKXsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGF1dG8gcTpwZW9wbGVbcC5zZWNvbmRdWzJdKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFucy5wdXNoX2JhY2socSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGF1dG8gcTpwZW9wbGVbcC5zZWNvbmRdWzFdKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFucy5wdXNoX2JhY2socSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzb3J0KGFucy5iZWdpbigpLGFucy5lbmQoKSk7DQogICAgICAgICAgICBmb3IoYXV0byBwOmFucykgcHJpbnRmKCIlZCAiLHApOw0KICAgICAgICAgICAgcHJpbnRmKCJcbiIpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIGlmKHN6W2RlcF0uYT5zeltkZXBdLmIpew0KICAgICAgICBpZC5wdXNoX2JhY2soezAsc3pbZGVwXS50fSk7DQogICAgICAgIGlmKHNvbHZlKGRlcCsxLHN1bStzeltkZXBdLmEpKXsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGlkLnBvcF9iYWNrKCk7DQogICAgICAgIGlkLnB1c2hfYmFjayh7MSxzeltkZXBdLnR9KTsNCiAgICAgICAgaWYoc29sdmUoZGVwKzEsc3VtK3N6W2RlcF0uYikpew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgaWQucG9wX2JhY2soKTsNCiAgICB9DQogICAgZWxzZXsNCiAgICAgICAgaWQucHVzaF9iYWNrKHsxLHN6W2RlcF0udH0pOw0KICAgICAgICBpZihzb2x2ZShkZXArMSxzdW0rc3pbZGVwXS5iKSl7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZC5wb3BfYmFjaygpOw0KICAgICAgICBpZC5wdXNoX2JhY2soezAsc3pbZGVwXS50fSk7DQogICAgICAgIGlmKHNvbHZlKGRlcCsxLHN1bStzeltkZXBdLmEpKXsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGlkLnBvcF9iYWNrKCk7DQogICAgfQ0KDQogICAgcmV0dXJuIGZhbHNlOw0KfQ0KDQp2b2lkIF9zb2x2ZSgpew0KICAgIGludCBtLGksajsNCiAgICBzY2FuZigiJWQlZCVkIiwmbiwmUSwmbSk7DQogICAgZm9yKGk9MTtpPD1tO2krKyl7DQogICAgICAgaW50IHQseCx5Ow0KICAgICAgIHNjYW5mKCIlZCVkJWQiLCZ0LCZ4LCZ5KTsNCiAgICAgICB2ZWNbeF0ucHVzaF9iYWNrKHt5LHR9KTsNCiAgICAgICB2ZWNbeV0ucHVzaF9iYWNrKHt4LHR9KTsNCiAgICB9DQoNCiAgICBmb3IoaT0xO2k8PW47aSsrKXsNCiAgICAgICBpZighY29baV0pew0KICAgICAgICAgICBjbnRbMV09Y250WzJdPTA7DQogICAgICAgICAgIGRmcyhpLDEpOw0KICAgICAgICAgICBzei5wdXNoX2JhY2soUChjbnRbMV0sY250WzJdLHN6LnNpemUoKSkpOw0KICAgICAgICAgICBub3crKzsNCiAgICAgICB9DQogICAgfQ0KICAgIGlmKGZsYWcpew0KICAgICAgICBwcmludGYoIk5PXG4iKTsNCiAgICAgICAgcmV0dXJuIDsNCiAgICB9DQogICAgc29ydChzei5iZWdpbigpLHN6LmVuZCgpKTsNCiAgICBpZighc29sdmUoMCwwKSkgcHJpbnRmKCJOT1xuIik7DQoNCg0KfQ0KDQppbnQgbWFpbigpew0KICAgIC8vaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOw0KDQogICAgLy9pbnQgVDtzY2FuZigiJWQiLCZUKTt3aGlsZShULS0pDQogICAgX3NvbHZlKCk7DQp9DQo="}]