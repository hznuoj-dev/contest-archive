[{"id":"2693","submission_id":"2693","filename":"B.cpp","source":"I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CgojZGVmaW5lIGRiZyh4Li4uKSBcCiAgICBkbyB7IFwKICAgICAgICBzdGQ6OmNvdXQgPDwgI3ggPDwgIiAtPiAiOyBcCiAgICAgICAgZXJyKHgpOyBcCiAgICB9IHdoaWxlICgwKQoKdm9pZCBlcnIoKSB7CiAgICBzdGQ6OmNvdXQgPDwgc3RkOjplbmRsOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBULCBjbGFzcy4uLiBUcz4Kdm9pZCBlcnIoVCBhcmcsIFRzICYuLi4gYXJncykgewogICAgc3RkOjpjb3V0IDw8IGFyZyA8PCAnICc7CiAgICBlcnIoYXJncy4uLik7Cn0KCnVzaW5nIGxsID0gbG9uZyBsb25nOwp1c2luZyBsZCA9IGxvbmcgZG91YmxlOwp1c2luZyB1bGwgPSB1bnNpZ25lZCBsb25nIGxvbmc7CnVzaW5nIGkxMjggPSBfX2ludDEyODsKdXNpbmcgcCA9IHN0ZDo6cGFpcjxsbCwgbGw+Owp1c2luZyBwMTI4ID0gc3RkOjpwYWlyPGkxMjgsIGkxMjg+OwoKcCBvcGVyYXRvci0ocCAmcDEsIHAgJnAyKSB7CiAgICByZXR1cm4ge3AxLmZpcnN0IC0gcDIuZmlyc3QsIHAxLnNlY29uZCAtIHAyLnNlY29uZH07Cn0KCmkxMjggb3BlcmF0b3IqKHAgJnAxLCBwICZwMikgewogICAgcmV0dXJuIHAxLmZpcnN0ICogcDIuZmlyc3QgKyBwMS5zZWNvbmQgKiBwMi5zZWNvbmQ7Cn07CgppMTI4IGdjZChpMTI4IGEsIGkxMjggYikgewogICAgaWYgKGIgPT0gMCkgcmV0dXJuIGE7CiAgICByZXR1cm4gYSAlIGIgPT0gMCA/IGIgOiBnY2QoYiwgYSAlIGIpOwp9Cgp2b2lkIHJ1bihpbnQgdENhc2UpIHsKICAgIGludCBuOwogICAgc3RkOjpjaW4gPj4gbjsKICAgIGF1dG8gYWJzID0gWyZdKHAgJnApIHsKICAgICAgICByZXR1cm4gcC5maXJzdCAqIHAuZmlyc3QgKyBwLnNlY29uZCAqIHAuc2Vjb25kOwogICAgfTsKICAgIGF1dG8gbXVsdGkgPSBbJl0ocCBwMSwgcCBwMikgewogICAgICAgIHJldHVybiBwMS5maXJzdCAqIHAyLnNlY29uZCAtIHAxLnNlY29uZCAqIHAyLmZpcnN0OwogICAgfTsKICAgIHN0ZDo6bWFwPHN0ZDo6dmVjdG9yPHAxMjg+LCBpbnQ+IG1wOwogICAgZm9yIChpbnQgXyA9IDA7IF8gPCBuOyArK18pIHsKICAgICAgICBpbnQgbTsKICAgICAgICBzdGQ6OmNpbiA+PiBtOwogICAgICAgIHN0ZDo6dmVjdG9yPHA+IHYobSk7CiAgICAgICAgZm9yIChhdXRvICZbeCwgeV06IHYpIHsKICAgICAgICAgICAgc3RkOjpjaW4gPj4geCA+PiB5OwogICAgICAgIH0KICAgICAgICBzdGQ6OnNvcnQodi5iZWdpbigpLCB2LmVuZCgpKTsKICAgICAgICBwIG8gPSB2WzBdOwogICAgICAgIHN0ZDo6c29ydCh2LmJlZ2luKCksIHYuZW5kKCksIFsmXShwICZwMSwgcCAmcDIpIHsKICAgICAgICAgICAgaWYgKG11bHRpKHAxIC0gbywgcDIgLSBvKSkgcmV0dXJuIG11bHRpKHAxIC0gbywgcDIgLSBvKSA+IDA7CiAgICAgICAgICAgIHJldHVybiBwMS5maXJzdCA8IHAyLmZpcnN0OwogICAgICAgIH0pOwogICAgICAgIHN0ZDo6dmVjdG9yPHAxMjg+IGFuZ2xlczsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG07ICsraSkgewogICAgICAgICAgICBpbnQgaiA9IChpICsgMSkgJSBtOwogICAgICAgICAgICBpbnQgayA9IChpICsgMikgJSBtOwogICAgICAgICAgICBwIHAxID0gdltqXSAtIHZbaV07IC8vaSAtPiBqLCBqIC0+IGsKICAgICAgICAgICAgcCBwMiA9IHZba10gLSB2W2pdOwogICAgICAgICAgICBpMTI4IHVwID0gcDEgKiBwMjsKICAgICAgICAgICAgdXAgKj0gdXA7CiAgICAgICAgICAgIGkxMjggZG93biA9IDE7CiAgICAgICAgICAgIGRvd24gKj0gYWJzKHAxKTsKICAgICAgICAgICAgZG93biAqPSBhYnMocDIpOwogICAgICAgICAgICBpMTI4IGcgPSBnY2QodXAsIGRvd24pOwogICAgICAgICAgICB1cCAvPSBnLCBkb3duIC89IGc7CiAgICAgICAgICAgIGFuZ2xlcy5lbXBsYWNlX2JhY2sodXAsIGRvd24pOwogICAgICAgIH0KICAgICAgICBzdGQ6OnNvcnQoYW5nbGVzLmJlZ2luKCksIGFuZ2xlcy5lbmQoKSk7CiAgICAgICAgc3RkOjpjb3V0IDw8IG1wW2FuZ2xlc10gPDwgJ1xuJzsKICAgICAgICBtcFthbmdsZXNdKys7CiAgICB9Cn0KCmludCBtYWluKCkgewogICAgc3RkOjppb3NfYmFzZTo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIHN0ZDo6Y2luLnRpZShudWxscHRyKTsKICAgIGludCBUID0gMTsKLy8gICAgc3RkOjpjaW4gPj4gVDsKICAgIGZvciAoaW50IHQgPSAxOyB0IDw9IFQ7ICsrdCkgewogICAgICAgIHJ1bih0KTsKICAgIH0KICAgIHJldHVybiAwOwp9"}]